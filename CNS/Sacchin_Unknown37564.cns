;///////////////////////////////////////////////////////////////////////////
;---------------------------------------------------------------------------
;
; Unknown37564
;
;---------------------------------------------------------------------------
;///////////////////////////////////////////////////////////////////////////

;///////////////////////////////////////////////////////////////////////////
;---------------------------------------------------------------------------
;	5A
;---------------------------------------------------------------------------

[StateDef 200]
type = S
MoveType = A
physics = S
ctrl = 0

[State 200, A連打判断用Explod]
type = Explod
triggerall = Anim = 200
triggerall = AnimElemTime(7) > 0
trigger1 = command = "a"
trigger1 = command != "holddown"
ID = 200
anim = 0
RemoveTime = 1
RemoveOnGetHit = 1
Scale = 0,0
SuperMovetime = 2147483646
PauseMoveTime = 2147483646
ignorehitpause = 1

[State 200, A連打の初動でMoveContact系をリセット]
type = MoveHitReset
trigger1 = NumExplod(200)
ignorehitpause = 1

[State 200, アニメ変更]
type = ChangeAnim
trigger1 = Anim != 200
trigger2 = NumExplod(200)
;  A連打判定が出たら変える
value = 200
ignorehitpause = 1

[State 200, 腕振り音]
type = Playsnd
trigger1 = AnimElem = 1
value = s0,1

[State 200, 攻撃]
type = HitDef
triggerall = MoveContact = 0
trigger1 = AnimElemTime(2)>0
trigger1 = AnimElemTime(6)<12
attr = S, NA
damage = 10, 2
AnimType = Light
GuardFlag = M
HitFlag = MAFD
Priority = 3, Hit
PauseTime = 6,6
Guard.PauseTime = 6,6
GetPower = 10
GivePower = 10,5
Guard.SparkNo = S4100
SparkNo = S4100+(Random%2)
SparkXY = -8, -63
HitSound = s0, 15
GuardSound = S0, 30
Ground.Type = High
Ground.SlideTime = Abs(AnimTime)
Ground.HitTime = Abs(AnimTime)
Guard.Slidetime = 20
Guard.Ctrltime = 20
Ground.Velocity = -4.3
guard.velocity = -5
Guard.CornerPush.VelOff = -3.3
AirGuard.CornerPush.VelOff = -3.5
Air.Velocity = -2,-3.5
Air.Fall = 1
Fall.RecoverTime = 30
persistent = 256

[State 200]
type = SelfState
trigger1 = !AnimTime
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;	5B
;---------------------------------------------------------------------------

[StateDef 210]
type = S
MoveType = A
physics = S
ctrl = 0

[State 210, アニメ変更]
type = ChangeAnim
trigger1 = Anim != StateNo
value = StateNo
ignorehitpause = 1

[State 210, 初動微妙に動くためのやつ]
type = posadd
trigger1 = AnimElem = 3
trigger1 = Pos Y - EnemyNear,Pos Y = 0
trigger1 = Abs( Pos X - EnemyNear,Pos X ) > 42;すり抜けるほど近いならさせない
x = 42

[State 210, 腕振った瞬間に加速]
type = VelSet
trigger1 = AnimElem = 4
x = 12

[State 210, 腕振り音]
type = Playsnd
trigger1 = AnimElem = 4
value = s0,2

[State 210, 風切り音]
type = PlaySnd
trigger1 = MoveHit = 1
value = s0,38
ignorehitpause = 1

[State 230, 攻撃]
type = HitDef
triggerall = MoveContact = 0
trigger1 = AnimElemTime(5)>0
trigger1 = AnimElemTime(7)<2
attr = S, NA
damage = 35, 5
AnimType = Light
GuardFlag = M
HitFlag = MAFD
Priority = 3, Hit
PauseTime = 0,6
Guard.PauseTime = 6,6
GetPower = 10
GivePower = 10,5
Guard.SparkNo = S4100
SparkNo = S4102+(Random%2)
SparkXY = -8, -63
HitSound = s0, 20
GuardSound = S0, 30
Ground.Type = High
Ground.SlideTime = 30
Ground.HitTime = 30
Guard.Slidetime = 60
Guard.Ctrltime = 60
Ground.Velocity = -8,0
guard.velocity = -5
Guard.CornerPush.VelOff = -3.3
AirGuard.CornerPush.VelOff = -3.5
Air.Velocity = -3,-6
Fall = 0
Air.Fall = 1
Fall.Recover = 0
EnvShake.Time = 6
EnvShake.Freq = 12
EnvShake.Ampl = 24
EnvShake.Phase = 36

[State 210, エフェクトヘルパー]
type = Helper
triggerall = Anim = 210
trigger1 = AnimElemTime(5) = 0
ID = 4146
StateNo = 4133
name = "Explod_Helper"
helpertype = Player
keyctrl = 0
ownpal = 1
Size.XScale = 1.5
Size.YScale = 1.5
SuperMoveTime = 2147483647 * NumHelper(4162)
PauseMoveTime = 2147483647 * NumHelper(4162)
ignorehitpause = 1

[State 210, エフェクトヘルパー]
type = Helper
triggerall = Anim = 210
trigger1 = AnimElemTime(5) = 0
ID = 4133
StateNo = 4133
name = "Explod_Helper"
helpertype = Player
keyctrl = 0
ownpal = 1
Size.XScale = 1.5
Size.YScale = 1.5
SuperMoveTime = 2147483647 * NumHelper(4162)
PauseMoveTime = 2147483647 * NumHelper(4162)
ignorehitpause = 1

[State 310, エフェクト]
type = Explod
triggerall = Anim = 210
trigger1 = MoveHit = 1
ID = 4134
anim = 4134
postype = p1
pos = 33,-70
bindtime = -1
Facing = -1
SprPriority = 4
SuperMoveTime = 2147483647 * NumHelper(4162)
PauseMoveTime = 2147483647 * NumHelper(4162)
RemoveOnGetHit = 1
ignorehitpause = 1

[State 200]
type = SelfState
trigger1 = !AnimTime
value = 0
ctrl = 1

[Statedef 4133]
type = S
movetype = I
physics = N
SprPriority = 4
movehitpersist = 1
hitdefpersist = 1

[State 6007, 2]
type = SprPriority
trigger1 = 1
value = 5
persistent = 256
ignorehitpause = 1

[State 6007, 2]
type = PlayerPush
trigger1 = 1
value = 0
ignorehitpause = 1

[State 6007, 2]
type = BindToRoot
trigger1 = Root,Anim = 210
time = 1
ignorehitpause = 1

[State 6007, 2]
type = AngleDraw
trigger1 = 1
value = -43
persistent = 256
ignorehitpause = 1

[State 6007, 1]
type = ChangeAnim
triggerall = IsHelper(4133)
trigger1 = Anim != 4133
value = 4133
ignorehitpause = 1

[State 6007, 1]
type = ChangeAnim
triggerall = IsHelper(4146)
trigger1 = Anim != 4146
value = 4146
ignorehitpause = 1

[State 6007, 2]
type = Trans
trigger1 = IsHelper(4133)
trans = add
persistent = 256
ignorehitpause = 1

[State 6007, 2]
type = Trans
trigger1 = IsHelper(4146)
trans = sub
persistent = 256
ignorehitpause = 1

[State 200]
type = SelfState
trigger1 = !AnimTime
value = 2147483646
ignorehitpause = 1

[State 200]
type = SelfState
trigger1 = 1
value = ifelse( MoveType=I ,5150 ,120 )
ctrl = 0
ignorehitpause = 1

;---------------------------------------------------------------------------
;	5C
;---------------------------------------------------------------------------

[StateDef 230]
type = S
MoveType = A
physics = S
ctrl = 0

[State 230, アニメ変更]
type = ChangeAnim
trigger1 = Anim != 230
value = 230
ignorehitpause = 1

[State 230, 腕振り音]
type = Playsnd
trigger1 = AnimElem = 5
value = s0,3

[State 230, 腕振る時加速]
type = VelSet
trigger1 = AnimElem = 5
x = 12

[State 230, ヒット時追加音]
type = PlaySnd
trigger1 = AnimElemtime(5) >= 0
trigger1 = MoveHit = 1
value = s0,38
ignorehitpause = 1

[State 310, エフェクト]
type = Explod
triggerall = Anim = 230
trigger1 = AnimElemTime(4) = 0
ID = 4108
anim = 4108
postype = p1
pos = 0,0
bindtime = -1
Scale = 1.5,1.3
SprPriority = 4
RemoveOnGetHit = 1
SuperMoveTime = 2147483647 * NumHelper(4162)
PauseMoveTime = 2147483647 * NumHelper(4162)
ignorehitpause = 1

[State 310, エフェクト]
type = Explod
triggerall = Anim = 230
trigger1 = AnimElemTime(4) = 0
ID = 4144
anim = 4144
postype = p1
pos = 0,0
bindtime = -1
SprPriority = 5
Scale = 1.5,1.3
RemoveOnGetHit = 1
SuperMoveTime = 2147483647 * NumHelper(4162)
PauseMoveTime = 2147483647 * NumHelper(4162)
ignorehitpause = 1

[State 230, 攻撃]
type = HitDef
triggerall = MoveContact = 0
trigger1 = AnimElemTime(5)>0
trigger1 = AnimElemTime(7)<12
attr = S, NA
damage = 100, 10
AnimType = Light
GuardFlag = M
HitFlag = MAFD
Priority = 3, Hit
PauseTime = 0,6
Guard.PauseTime = 6,6
GetPower = 10
GivePower = 10,5
Guard.SparkNo = S4100
SparkNo = S4102+(Random%2)
SparkXY = -8, -63
HitSound = s0, 21
GuardSound = S0, 30
Ground.Type = High
Ground.SlideTime = 2147483647
Ground.HitTime = 2147483647
Guard.Slidetime = 20
Guard.Ctrltime = 20
Ground.Velocity = -1000,-12
guard.velocity = -5
Guard.CornerPush.VelOff = -3.3
AirGuard.CornerPush.VelOff = -3.5
Air.Velocity = -1000,-6
Fall = 1
Air.Fall = 1
Fall.Recover = 0
EnvShake.Time = 6
EnvShake.Freq = 12
EnvShake.Ampl = 24
EnvShake.Phase = 36

[State 230]
type = SelfState
trigger1 = !AnimTime
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;	2A
;---------------------------------------------------------------------------

[StateDef 300]
type = C
MoveType = A
physics = C
ctrl = 0

[State 300, A連打判断用Explod]
type = Explod
triggerall = Anim = 300
triggerall = AnimElemTime(6) > 0
trigger1 = command = "a"
trigger1 = command = "holddown"
ID = 300
anim = 0
RemoveTime = 1
RemoveOnGetHit = 1
Scale = 0,0
SuperMovetime = 2147483646
PauseMoveTime = 2147483646
ignorehitpause = 1

[State 300, A連打の初動でMoveContact系をリセット]
type = MoveHitReset
trigger1 = NumExplod(300)
ignorehitpause = 1

[State 300, アニメ変更]
type = ChangeAnim
trigger1 = Anim != StateNo
trigger2 = NumExplod(300)
;  A連打判定が出たら変える
value = StateNo
ignorehitpause = 1

[State 300, 腕振り音]
type = Playsnd
trigger1 = AnimElem = 3
value = s0,1

[State 300, 初動加速]
type = VelSet
trigger1 = AnimElem = 3
x = 2

[State 300, 攻撃]
type = HitDef
triggerall = MoveContact = 0
trigger1 = AnimElemTime(3)>0
trigger1 = AnimElemTime(5)<2
attr = S, NA
damage = 20, 5
AnimType = Light
GuardFlag = M
HitFlag = MAFD
Priority = 3, Hit
PauseTime = 0,6
Guard.PauseTime = 6,6
GetPower = 10
GivePower = 10,5
Guard.SparkNo = S4100
SparkNo = S4100+(Random%2)
SparkXY = -8, -63
HitSound = s0, 15
GuardSound = S0, 30
Ground.Type = High
Ground.SlideTime = 12
Ground.HitTime = 12
Guard.Slidetime = 20
Guard.Ctrltime = 20
Ground.Velocity = -3,0
guard.velocity = -5
Guard.CornerPush.VelOff = -3.3
AirGuard.CornerPush.VelOff = -3.5
Air.Velocity = -1.5,-3
Air.Fall = 1
Fall.Recover = 0
EnvShake.Time = 2
EnvShake.Freq = 4
EnvShake.Ampl = 6
EnvShake.Phase = 8

[State 300]
type = SelfState
trigger1 = !AnimTime
value = 11
ctrl = 1


;---------------------------------------------------------------------------
;	2B
;---------------------------------------------------------------------------

[StateDef 310]
type = C
MoveType = A
physics = C
ctrl = 0

[State 310, アニメ変更]
type = ChangeAnim
trigger1 = Anim != StateNo
value = StateNo
ignorehitpause = 1

[State 310, 腕振り音]
type = Playsnd
trigger1 = AnimElem = 4
value = s0,1

[State 310, 加速]
type = VelSet
trigger1 = AnimElem = 4
x = 4

[State 310, エフェクト]
type = Explod
triggerall = Anim = 310
trigger1 = AnimElemTime(4) = 0
ID = 300
anim = 4117
postype = p1
pos = 28,31
bindtime = -1
SprPriority = 4
RemoveOnGetHit = 1
SuperMoveTime = 2147483647 * NumHelper(4162)
PauseMoveTime = 2147483647 * NumHelper(4162)
ignorehitpause = 1

[State 310, エフェクト]
type = Explod
triggerall = Anim = 310
trigger1 = AnimElemTime(4) = 0
ID = 300
anim = 4149
postype = p1
pos = 28,31
bindtime = -1
SprPriority = 4
RemoveOnGetHit = 1
SuperMoveTime = 2147483647 * NumHelper(4162)
PauseMoveTime = 2147483647 * NumHelper(4162)
ignorehitpause = 1

[State 310, 攻撃]
type = HitDef
triggerall = MoveContact = 0
trigger1 = AnimElemTime(4)>0
trigger1 = AnimElemTime(7)<12
attr = S, NA
damage = 100, 25
AnimType = Light
GuardFlag = M
HitFlag = MAFD
Priority = 3, Hit
PauseTime = 0,6
Guard.PauseTime = 6,6
GetPower = 10
GivePower = 10,5
Guard.SparkNo = S4100
SparkNo = S4100+(Random%2)
SparkXY = -8, -63
HitSound = s0, 22
GuardSound = S0, 30
Ground.Type = High
Ground.SlideTime = 2147483647
Ground.HitTime = 2147483647
Guard.Slidetime = 20
Guard.Ctrltime = 20
Ground.Velocity = -3,0
guard.velocity = -1
Guard.CornerPush.VelOff = -3.3
AirGuard.CornerPush.VelOff = -3.5
Air.Velocity = -3,-4
Fall = 1
Air.Fall = 1
Fall.Recover = 0
EnvShake.Time = 3
EnvShake.Freq = 6
EnvShake.Ampl = 9
EnvShake.Phase = 12

[State 310]
type = SelfState
trigger1 = !AnimTime
value = 11
ctrl = 1


;---------------------------------------------------------------------------
;	2C
;---------------------------------------------------------------------------

[StateDef 320]
type = C
MoveType = A
physics = C
ctrl = 0

[State 310, アニメ変更]
type = ChangeAnim
trigger1 = Anim != StateNo
value = StateNo
ignorehitpause = 1

[State 230, 腕振り音]
type = Playsnd
trigger1 = AnimElem = 4
value = s0,3

[State 230, 壁たたき音]
type = Playsnd
trigger1 = AnimElem = 4
value = s0,29

[State 230, ヒット時追加音]
type = PlaySnd
trigger1 = AnimElemtime(4) > 0
trigger1 = MoveHit = 1
value = s0,38
ignorehitpause = 1

[State 310, エフェクト]
type = Explod
triggerall = Anim = StateNo
trigger1 = AnimElemTime(4) = 0
ID = 4116
anim = 4116
postype = p1
pos = 0,0
SprPriority = 4
bindtime = 1
RemoveOnGetHit = 1
SuperMoveTime = 2147483647 * NumHelper(4162)
PauseMoveTime = 2147483647 * NumHelper(4162)
ignorehitpause = 1

[State 310, エフェクト]
type = Explod
triggerall = Anim = StateNo
trigger1 = AnimElemTime(4) = 0
ID = 4147
anim = 4147
postype = p1
pos = 0,0
SprPriority = 4
bindtime = 1
RemoveOnGetHit = 1
SuperMoveTime = 2147483647 * NumHelper(4162)
PauseMoveTime = 2147483647 * NumHelper(4162)
ignorehitpause = 1

[State 300, 攻撃]
type = HitDef
triggerall = MoveContact = 0
trigger1 = AnimElemTime(4)>0
trigger1 = AnimElemTime(7)<12
attr = S, NA
damage = 200, 25
fall.damage = 50
AnimType = Light
GuardFlag = M
HitFlag = MAFD
Priority = 3, Hit
PauseTime = 0,0
Guard.PauseTime = 6,6
GetPower = 10
GivePower = 10,5
Guard.SparkNo = S4100
SparkNo = S4100+(Random%2)
SparkXY = -8, -63
HitSound = s0, 21
GuardSound = S0, 30
Ground.Type = High
Ground.SlideTime = 2147483647
Ground.HitTime = 2147483647
Guard.Slidetime = 20
Guard.Ctrltime = 20
Ground.Velocity = -9,-25
guard.velocity = -5
Guard.CornerPush.VelOff = -3.3
AirGuard.CornerPush.VelOff = -3.5
Air.Velocity = -7,25
Fall = 1
Air.Fall = 1
Fall.Recover = 0
EnvShake.Time = 6
EnvShake.Freq = 12
EnvShake.Ampl = 24
EnvShake.Phase = 36

[State 300]
type = SelfState
trigger1 = !AnimTime
value = 11
ctrl = 1





;-------------------------------------------------------------------------------------------------
;--------------------------------------------------------------------------------------------------
;━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
;  <ヘルパー> ヘルパー消去ステート
;━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
;-------------------------------------------------------------------------------------------------
;この消去ステートはExplod消去召喚エラーを起こさないように削除するための安全装置的な削除ステートです。


[StateDef 2147483646]

[State 2147483646,ヘルパーを消す前にExplodを消去]
type = RemoveExplod
trigger1 = IsHelper
ignorehitpause = 1

[State 2147483646, 一度巡回させる(消去召喚回避)]
type = ChangeState
trigger1 = PrevStateNo != StateNo
value = StateNo
ignorehitpause = 1

;-------------------------------------------------------------------------------------------------

[State 2147483646, ヘルパー消去]
type = DestroySelf
trigger1 = IsHelper
trigger1 = !NumExplod
ignorehitpause = 1

;-------------------------------------------------------------------------------------------------

[State 2147483646, ヘルパー消去]
type = DestroySelf
trigger1 = IsHelper
trigger1 = !NumExplod
ignorehitpause = 1

;-------------------------------------------------------------------------------------------------

[State 2147483646, ヘルパー消去]
type = DestroySelf
trigger1 = IsHelper
trigger1 = !NumExplod
ignorehitpause = 1

;-------------------------------------------------------------------------------------------------

[State 2147483646, ヘルパー消去]
type = DestroySelf
trigger1 = IsHelper
trigger1 = !NumExplod
ignorehitpause = 1

;-------------------------------------------------------------------------------------------------

[State 2147483646, ヘルパー消去]
type = DestroySelf
trigger1 = IsHelper
trigger1 = !NumExplod
ignorehitpause = 1

;-------------------------------------------------------------------------------------------------

[State 2147483646, ヘルパー消去]
type = DestroySelf
trigger1 = IsHelper
trigger1 = !NumExplod
ignorehitpause = 1

;-------------------------------------------------------------------------------------------------

[State 2147483646, ヘルパー消去]
type = DestroySelf
trigger1 = IsHelper
trigger1 = !NumExplod
ignorehitpause = 1

;-------------------------------------------------------------------------------------------------

[State 2147483646, ヘルパー消去]
type = DestroySelf
trigger1 = IsHelper
trigger1 = !NumExplod
ignorehitpause = 1

;-------------------------------------------------------------------------------------------------

[State 2147483646, ヘルパー消去]
type = DestroySelf
trigger1 = IsHelper
trigger1 = !NumExplod
ignorehitpause = 1

;-------------------------------------------------------------------------------------------------

[State 2147483646, ヘルパー消去]
type = DestroySelf
trigger1 = IsHelper
trigger1 = !NumExplod
ignorehitpause = 1

;-------------------------------------------------------------------------------------------------

[State 2147483646, ヘルパー消去]
type = DestroySelf
trigger1 = IsHelper
trigger1 = !NumExplod
ignorehitpause = 1

;-------------------------------------------------------------------------------------------------

[State 2147483646, ヘルパー消去]
type = DestroySelf
trigger1 = IsHelper
trigger1 = !NumExplod
ignorehitpause = 1

;-------------------------------------------------------------------------------------------------

[State 2147483646, ヘルパー消去]
type = DestroySelf
trigger1 = IsHelper
trigger1 = !NumExplod
ignorehitpause = 1

;-------------------------------------------------------------------------------------------------

[State 2147483646, ヘルパー消去]
type = DestroySelf
trigger1 = IsHelper
trigger1 = !NumExplod
ignorehitpause = 1

;-------------------------------------------------------------------------------------------------

[State 2147483646, ヘルパー消去]
type = DestroySelf
trigger1 = IsHelper
trigger1 = !NumExplod
ignorehitpause = 1

;-------------------------------------------------------------------------------------------------

[State 2147483646, ヘルパー消去]
type = DestroySelf
trigger1 = IsHelper
trigger1 = !NumExplod
ignorehitpause = 1

;-------------------------------------------------------------------------------------------------

[State 2147483646, ヘルパー消去]
type = DestroySelf
trigger1 = IsHelper
trigger1 = !NumExplod
ignorehitpause = 1

;-------------------------------------------------------------------------------------------------

[State 2147483646, ヘルパー消去]
type = DestroySelf
trigger1 = IsHelper
trigger1 = !NumExplod
ignorehitpause = 1

;-------------------------------------------------------------------------------------------------

[State 2147483646, ヘルパー消去]
type = DestroySelf
trigger1 = IsHelper
trigger1 = !NumExplod
ignorehitpause = 1

;-------------------------------------------------------------------------------------------------

[State 2147483646, ヘルパー消去]
type = DestroySelf
trigger1 = IsHelper
trigger1 = !NumExplod
ignorehitpause = 1

;-------------------------------------------------------------------------------------------------
;22A当身始動
;///////////////////////////////////////////////////////////////////////////
[Statedef 4000]
type = S
movetype = A
physics = N
ctrl  = 0

[State 4000, アニメ変更]
type = ChangeAnim
trigger1 = Anim != StateNo
value = StateNo

[State 4000, 8席ヘルパーで埋まってしまったら捨てる]
type = TargetDrop
trigger1 = NumTarget > 8
trigger1 = Target,IsHelper

[State 4000, 当身成功時移動 - 上に当てはまらないなら対地投げ]
type = SelfState
trigger1 = NumTarget
trigger1 = !Target,IsHelper
value = 4008

[State 4000, 当身]
type = ReversalDef
trigger1 = !IsHelper
reversal.attr = SCA,AA,AT,AP
pausetime = 0,0
ID = 4100
ignorehitpause = 1

[State 4000, ]
type = SelfState
trigger1 = !AnimTime
value = 0
ctrl = 1


;///////////////////////////////////////////////////////////////////////////
;22A当身成功時対地投げ始動
;///////////////////////////////////////////////////////////////////////////
[Statedef 4001]
type = S
movetype = A
physics = N
ctrl  = 0

[State 4000, 腕振り音]
type = ChangeAnim
trigger1 = !IsHelper
trigger1 = Anim != StateNo
value = StateNo
ignorehitpause = 1

[State 4000, 腕振り音]
type = PlaySnd
trigger1 = !IsHelper
trigger1 = AnimElem = 1
value = s0,2
ignorehitpause = 1

[State 800, 1]
type = HitDef
Trigger1 = 1
Attr = S, ST
HitFlag = MAF
priority = 1, Miss
sparkno = -1
p2facing = 1
p1StateNo = 4002
p2StateNo = 4007
fall = 1

[State 4000, 腕振り音]
type = SelfState
trigger1 = !IsHelper
trigger1 = !AnimTime
value = 0
ctrl = 1
ignorehitpause = 1

;///////////////////////////////////////////////////////////////////////////
;22A当身/投げ成功時対地投げ成功
;///////////////////////////////////////////////////////////////////////////
[Statedef 4002]
type = S
movetype = A
physics = N
ctrl  = 0
velset = 0,0

[State 4000, 当身]
type = ReversalDef
trigger1 = !IsHelper
reversal.attr = SCA,AA,AT,AP
pausetime = 0,20
ignorehitpause = 1

[State 300, 後ろ投げ打判断用Explod]
type = Explod
trigger1 = Anim != [4002,4003]
ID = ifelse( (command="holdback") ,4003 ,4002 )
anim = 0
RemoveTime = 1
RemoveOnGetHit = 1
Scale = 0,0
SuperMoveTime = 2147483647 * NumHelper(4162)
PauseMoveTime = 2147483647 * NumHelper(4162)
ignorehitpause = 1

[State 4000, 腕振り音]
type = ChangeAnim
triggerall = !IsHelper
trigger1 = Anim != [4002,4003]
value = ifelse( NumExplod(4002) ,4002 ,4003 )
ignorehitpause = 1

[State 4000, 腕振り音]
type = PlaySnd
trigger1 = !IsHelper
trigger1 = AnimElem = 1
value = s0,13
ignorehitpause = 1

[State 4000, Target追従 引き寄せ]
type = TargetBind
trigger1 = AnimElemTime(4) = 0
pos = 27,-25
ignorehitpause = 1

[State 4000, Target追従 持ち上げ]
type = TargetBind
trigger1 = AnimElemTime(5) >= 0
trigger1 = AnimElemTime(6) <= 20
pos = 4,-40
ignorehitpause = 1

[State 4000, Target追従 前投げ]
type = TargetBind
trigger1 = Anim = 4002
trigger1 = AnimElemTime(7) = 0
pos = 20,-80
ignorehitpause = 1

[State 4000, Target追従 前投げ]
type = TargetBind
trigger1 = Anim = 4003
trigger1 = AnimElemTime(7) = 0
pos = -30,-78
ignorehitpause = 1

[State 4000, Target追従 前投げダウン]
type = TargetBind
trigger1 = Anim = 4002
trigger1 = AnimElemTime(8) = 0
pos = 10,0
ignorehitpause = 1

[State 4000, Target追従 後ろ投げダウン]
type = TargetBind
trigger1 = Anim = 4003
trigger1 = AnimElemTime(8) = 0
pos = -10,0
ignorehitpause = 1

[State 4000, 埃エフェクト]
type = Explod
trigger1 = AnimElemTime(8) = 0
trigger2 = AnimElemTime(15) = 0
ID = 4111
Anim = 4111
postype = p1
pos = ifelse( Anim=4002 ,20 ,-20 ),0
bindtime = -1
SprPriority = 4
RemoveOnGetHit = 1
ignorehitpause = 1

[State 4000, Target追従 前投げ]
type = TargetLifeAdd
trigger1 = AnimElemTime(8) = 0
trigger2 = AnimElemTime(15) = 0
value = -80
ignorehitpause = 1

[State 4000, 打撃エフェクト]
type = Explod
trigger1 = AnimElemTime(15) = 0
ID = 4100
Anim = 4103+Random%2
postype = p2
pos = 0,0
bindtime = -1
SprPriority = 4
RemoveOnGetHit = 1
SuperMoveTime = 2147483647 * NumHelper(4162)
PauseMoveTime = 2147483647 * NumHelper(4162)
ignorehitpause = 1

[State 4000, 腕振り音]
type = PlaySnd
trigger1 = !IsHelper
trigger1 = AnimElemTime(8) = 0
value = s0,3
ignorehitpause = 1

[State 4000, ダウン音]
type = PlaySnd
trigger1 = !IsHelper
trigger1 = AnimElemTime(8) = 0
value = s0,28
ignorehitpause = 1

[State 4000, 叩きつけ音]
type = PlaySnd
trigger1 = !IsHelper
trigger1 = AnimElemTime(8) = 0
value = s0,20
ignorehitpause = 1

[State 230, 打撃音]
type = PlaySnd
trigger1 = AnimElemtime(17) = 0
value = s0,21
ignorehitpause = 1

[State 230, 打撃追加音]
type = PlaySnd
trigger1 = AnimElemtime(17) = 0
value = s0,38
ignorehitpause = 1

[State 230, 打撃追加音]
type = PlaySnd
trigger1 = AnimElemtime(17) = 0
value = s0,29
ignorehitpause = 1

[State 230, 画面揺れ]
type = EnvShake
trigger1 = AnimElemtime(17) = 0
Time = 6
Freq = 12
Ampl = 24
Phase = 36
ignorehitpause = 1

[State 4000, 腕振り音]
type = SelfState
trigger1 = !IsHelper
trigger1 = !AnimTime
value = 0
ctrl = 1
ignorehitpause = 1

;///////////////////////////////////////////////////////////////////////////
;22A当身成功時対空投げ始動
;///////////////////////////////////////////////////////////////////////////
[Statedef 4004]
type = A
movetype = A
physics = N
ctrl  = 0

[State 4000, 当身]
type = ReversalDef
trigger1 = !IsHelper
reversal.attr = SCA,AA,AT,AP
pausetime = 0,20
ignorehitpause = 1

[State 4000, 当身]
type = PlayerPush
trigger1 = !IsHelper
value = 0
persistent = 256
ignorehitpause = 1

[State 4004, アニメ変更]
type = ChangeAnim
trigger1 = !IsHelper
trigger1 = Anim != StateNo
trigger1 = 1 || var(0) := 0
value = StateNo
ignorehitpause = 1

[State 4004, 腕振り音]
type = Trans
triggerAll = !IsHelper
triggerall = NumTarget(4000)
triggerall = AnimElemTime(3) > 0
trigger1 = var(0) := var(0) + 50
trans = addalpha
alpha = 255-var(0),var(0)
ignorehitpause = 1

[State 4000, 重力開始]
type = PosSet
trigger1 = !IsHelper
trigger1 = AnimElemTime(3) > 0
trigger1 = var(0) >= 250
trigger1 = NumTarget(4000)
x = Target,Pos X
y = Target,Pos Y
ignorehitpause = 1

[State 4004, 腕振り音]
type = PlaySnd
trigger1 = !IsHelper
trigger1 = AnimElem = 3
value = s0,8
ignorehitpause = 1

[State 4004, 距離計測]
type = Null
triggerall = !IsHelper
trigger1 = 1||fvar(0) := Abs( Pos X - EnemyNear,Pos X )
trigger1 = 1||fvar(1) := Abs( Pos Y - EnemyNear,Pos Y )
persistent = 256
ignorehitpause = 1

[State 4004, 角度計測]
type = Null
triggerall = !IsHelper
trigger1 = fvar(0) && fvar(1)
trigger1 = var(1)  := Ceil( Atan(fvar(0)/fvar(1))*(180/Pi) )
trigger2 = fvar(0) && !fvar(1)
trigger2 = var(1)  := Ceil( Atan(fvar(0))*(180/Pi) )
trigger3 = !fvar(0) && fvar(1)
trigger3 = var(1)  := Ceil( Atan(fvar(1))*(180/Pi) )
persistent = 256
ignorehitpause = 1

[State 4004, 角度変更]
type = Angledraw
triggerall = !IsHelper
triggerall = AnimElemTime(3) >= 0
triggerall = AnimElemTime(6) <= 5
trigger1 = var(1) = [-32,32]
trigger2 = var(1) < -32
trigger2 = var(1) := -32
trigger3 = var(1) > 32
trigger3 = var(1) := 32
value = 22-var(1)
persistent = 256
ignorehitpause = 1

[State 4004, 速度変更 - X軸]
type = VelSet
triggerall = !IsHelper
triggerall = AnimElemTime(3) > 0
trigger1 = AnimElemTime(6) <= 5
;trigger1 = ( Pos X - EnemyNear,Pos X ) * ifelse( Facing=1 ,-1 ,1 ) > 30
x = Ceil(Sin(var(1)/(180/Pi)))*24
persistent  =256
ignorehitpause = 1

[State 4004, 速度変更 - Y軸]
type = VelSet
triggerall = !IsHelper
triggerall = AnimElemTime(3) > 0
triggerall = AnimElemTime(6) <= 5
trigger1 = ( Pos Y - EnemyNear,Pos Y ) >= 0
y = -Cos(var(1)/(180/Pi))*12
persistent  =256
ignorehitpause = 1

[State 4000, 埃エフェクト]
type = Explod
trigger1 = AnimElemTime(2) = 10
ID = 4109
anim = ifelse( (42-var(1)=[37,47]) ,6011 ,6009 )
postype = p1
pos = 0,0
bindtime = 1
SprPriority = 4
RemoveOnGetHit = 1
ignorehitpause = 1

[State 800, 1]
type = HitDef
Trigger1 = 1
Attr = S, ST
HitFlag = AFD
priority = 1, Miss
sparkno = -1
p2facing = 1
p1StateNo = 4105
p2StateNo = 4007
fall = 1
persistent = 256

[State 4000, 腕振り音]
type = PlaySnd
trigger1 = !IsHelper
trigger1 = AnimElem = 1
value = s0,2
ignorehitpause = 1

[State 4000, 重力開始]
type = StateTypeSet
trigger1 = !IsHelper
trigger1 = AnimElemTime(7) = 0
physics = A
ignorehitpause = 1

[State 4000, 重力開始]
type = SelfState
trigger1 = !IsHelper
trigger1 = Anim = StateNo
trigger1 = AnimElemTime(10) >= 0
trigger1 = Pos Y > -15
trigger1 = Vel Y > 0
value = 52
ctrl  = 1
ignorehitpause = 1

;///////////////////////////////////////////////////////////////////////////
;22A当身成功時対空投げ成功
;///////////////////////////////////////////////////////////////////////////
[Statedef 4005]
type = A
movetype = A
physics = N
ctrl  = 0

[State 4005, 後ろ投げ打判断用Explod]
type = Explod
trigger1 = Anim != [4002,4003]
ID = ifelse( (command="holdback") ,4006 ,4005 )
anim = 0
RemoveTime = 1
RemoveOnGetHit = 1
Scale = 0,0
SuperMoveTime = 2147483647 * NumHelper(4162)
PauseMoveTime = 2147483647 * NumHelper(4162)
ignorehitpause = 1

[State 4000, Target追従 前投げ]
type = TargetLifeAdd
trigger1 = AnimElemTime(3) = 0
value = -80
ignorehitpause = 1

[State 4005, アニメ変更]
type = ChangeAnim
triggerall = !IsHelper
trigger1 = Anim != [4005,4006]
value = ifelse( NumExplod(4006) ,4006 ,4005 )
ignorehitpause = 1

[State 4004, Velリセット]
Type = VelSet
triggerall = !IsHelper
trigger1 = Anim = 4005
trigger1 = AnimElemTime(1) = 0
x = Vel X / 2
y = Vel Y / 2

[State 4004, Velリセット]
Type = VelSet
triggerall = !IsHelper
trigger1 = Anim = 4006
trigger1 = AnimElemTime(1) = 0
x = 0
y = 0

[State 4000, 腕振り音]
type = PlaySnd
trigger1 = !IsHelper
Trigger1 = AnimElemTime(3) = 0
value = s0,3
ignorehitpause = 1

[State 4005, 腕振り音]
type = PlaySnd
trigger1 = !IsHelper
Trigger1 = AnimElemTime(3) = 0
value = s0,8
ignorehitpause = 1

[State 4005, 腕振り音]
type = PlaySnd
trigger1 = !IsHelper
Trigger1 = Anim = 4005
Trigger1 = AnimElemTime(3) = 0
value = s0,15
ignorehitpause = 1

[State 4004, 前投げ用位置移動]
Type = VelSet
Trigger1 = Anim = 4005
Trigger1 = AnimElemTime(3) = 0
X = -2
Y = -5

[State 4000, 打撃エフェクト]
type = Explod
trigger1 = AnimElemTime(3) = 0
ID = 4100
Anim = 4100+(Random%2)
postype = p2
pos = 0,0
bindtime = 1
SprPriority = 4
RemoveOnGetHit = 1
SuperMoveTime = 2147483647 * NumHelper(4162)
PauseMoveTime = 2147483647 * NumHelper(4162)
ignorehitpause = 1

[State 4005, 後ろ投げ用相手固定]
Type = TargetBind
Trigger1 = Anim = 4005
Trigger1 = AnimElemTime(2)<6
Pos = 10, 0
Time = 1
persistent = 256

[State 4004, 前投げ用落下速度]
Type = VelAdd
Trigger1 = Anim = 4005
Trigger1 = AnimElemTime(3) >= 0
Y = 0.52

[State 4005, 後ろ投げ用相手固定]
Type = TargetBind
Trigger1 = Anim = 4006
Trigger1 = AnimElemTime(4)<0
Pos = 40, -25
Time = 1

[State 4004, 後ろ投げ用位置移動]
Type = PosAdd
Trigger1 = Anim = 4006
Trigger1 = AnimElemTime(4) = 0
X = 40
Y = -40

[State 4004, 後ろ投げ用位置移動]
Type = VelSet
Trigger1 = Anim = 4006
Trigger1 = AnimElemTime(4) = 0
X = 3.6
Y = -8

[State 4000, 腕振り音]
type = PlaySnd
trigger1 = !IsHelper
trigger1 = AnimElemTime(1) = 0
value = s0,2
ignorehitpause = 1

[State 4000, 腕振り音]
type = PlaySnd
trigger1 = !IsHelper
trigger1 = AnimElemTime(1) = 0
value = s0,14
ignorehitpause = 1

[State 4000, 腕振り音]
type = PlaySnd
trigger1 = !IsHelper
trigger1 = Anim = 4006
trigger1 = AnimElemTime(4) = 0
value = s0,22
ignorehitpause = 1

[State 4000, 腕振り音]
type = PlaySnd
trigger1 = !IsHelper
trigger1 = Anim = 4006
trigger1 = AnimElemTime(4) = 0
value = s0,13
ignorehitpause = 1

[State 4000, 腕振り音]
type = PlaySnd
trigger1 = !IsHelper
trigger1 = Anim = 4006
trigger1 = AnimElemTime(4) = 0
value = s0,50
ignorehitpause = 1

[State 4000, 腕振り音]
type = PlaySnd
trigger1 = !IsHelper
trigger1 = AnimElemTime(1) = 0
value = s0,14
ignorehitpause = 1

[State 4000, 重力開始]
type = VelAdd
triggerall = !IsHelper
trigger1 = Anim = 4005
trigger1 = AnimElemTime(7) >= 0
trigger2 = Anim = 4006
trigger2 = AnimElemTime(4) > 0
y = 0.82
ignorehitpause = 1

[State 4000, 重力開始]
type = SelfState
trigger1 = !IsHelper
trigger1 = AnimElemTime(10) >= 0
trigger1 = Pos Y > -15
trigger1 = Vel Y > 0
value = 52
ctrl  = 1
ignorehitpause = 1


;///////////////////////////////////////////////////////////////////////////
;22系一括相手やられステート
;///////////////////////////////////////////////////////////////////////////
[Statedef 4007]
type = U
movetype = H
physics = N
ctrl  = 0

;/////////////////////////////////////
;  ここから22A地上処理
;/////////////////////////////////////
[State 4007, アニメ変更前StateTypeリセット]
type = StateTypeSet
trigger1 = Enemy(Enemy,Name!="Sacchin"),StateNo = 4002
trigger1 = Enemy(Enemy,Name!="Sacchin"),AnimElemTime(1) = 0
StateType = S
ignorehitpause = 1

[State 4007, アニメ変更前Posリセット]
type = PosSet
trigger1 = Enemy(Enemy,Name!="Sacchin"),StateNo = 4002
trigger1 = Enemy(Enemy,Name!="Sacchin"),AnimElemTime(1) = 0
x = Enemy(Enemy,Name!="Sacchin"),Pos X - 35*Facing
y = 0
ignorehitpause = 1

[State 4007, アニメ変更 引き寄せ時]
type = ChangeAnim
trigger1 = Enemy(Enemy,Name!="Sacchin"),StateNo = 4002
trigger1 = Enemy(Enemy,Name!="Sacchin"),AnimElemTime(4) < 0
value = 5000
elem = 1
ignorehitpause = 1

[State 4007, アニメ変更 持ち上げ時]
type = ChangeAnim
trigger1 = Enemy(Enemy,Name!="Sacchin"),StateNo = 4002
trigger1 = Enemy(Enemy,Name!="Sacchin"),AnimElemTime(4) > 0
trigger1 = Enemy(Enemy,Name!="Sacchin"),AnimElemTime(6) <= 20
value = 5030
elem = 1
ignorehitpause = 1

[State 4007, アニメ変更 投げられ時]
type = ChangeAnim
trigger1 = Enemy(Enemy,Name!="Sacchin"),StateNo = 4002
trigger1 = Enemy(Enemy,Name!="Sacchin"),AnimElemTime(6) > 20
trigger1 = Enemy(Enemy,Name!="Sacchin"),AnimElemTime(9) <= 1
value = 5050
elem = 1
ignorehitpause = 1

[State 4007, アニメ変更 叩きつけダウン時]
type = ChangeAnim
trigger1 = Enemy(Enemy,Name!="Sacchin"),StateNo = 4002
trigger1 = Enemy(Enemy,Name!="Sacchin"),AnimElemTime(9) > 1
trigger1 = Enemy(Enemy,Name!="Sacchin"),AnimElemTime(15) <= 6
value = 5110
elem = 1
ignorehitpause = 1

[State 4007, アニメ変更 追い打ち時]
type = ChangeAnim
trigger1 = Anim != 5080
trigger1 = Enemy(Enemy,Name!="Sacchin"),StateNo = 4002
trigger1 = Enemy(Enemy,Name!="Sacchin"),AnimElemTime(15) > 6
value = 5080
ignorehitpause = 1

[State 4007, 復帰]
type = SelfState
trigger1 = Enemy(Enemy,Name!="Sacchin"),StateNo = 4002
trigger1 = Enemy(Enemy,Name!="Sacchin"),Animtime = -1
value = 5120
ctrl = 0
ignorehitpause = 1

;/////////////////////////////////////
;  ここから22A空中処理
;/////////////////////////////////////

[State 4007, アニメ変更前StateTypeリセット]
type = StateTypeSet
trigger1 = Enemy(Enemy,Name!="Sacchin"),StateNo = 4005
trigger1 = Enemy(Enemy,Name!="Sacchin"),AnimElemTime(1) = 0
StateType = A
ignorehitpause = 1

[State 4007 ,アニメ変更]
Type = ChangeAnim
trigger1 = Anim != 5110
trigger1 = Enemy(Enemy,Name!="Sacchin"),StateNo = 4005
Value = 5030
elem = 1
persistent = 256
ignorehitpause = 1

[State 4007 ,後ろ投げ時に速度を出す]
Type = VelSet
trigger1 = Enemy(Enemy,Name!="Sacchin"),StateNo = 4005
trigger1 = Enemy(Enemy,Name!="Sacchin"),Anim = 4006
trigger1 = Enemy(Enemy,Name!="Sacchin"),AnimElemTime(3) = 0
X = 4
Y = -4
ignorehitpause = 1

[State 4007 ,前投げ時に速度を出す]
Type = VelSet
trigger1 = Enemy(Enemy,Name!="Sacchin"),StateNo = 4005
trigger1 = Enemy(Enemy,Name!="Sacchin"),Anim = 4005
trigger1 = Enemy(Enemy,Name!="Sacchin"),AnimElemTime(3) = 0
X = -10
Y = 12
ignorehitpause = 1

[State 4007 ,後ろ投げ時重力加速]
Type = VelAdd
trigger1 = Anim = 5030
trigger1 = StateType = A
Y = 0.6
persistent = 256
ignorehitpause = 1

[State 4007 ,ダウン時Y軸加速リセット]
type = SelfState
triggerall = Anim = 4007
trigger1 = !AnimTime
value = 5120
ignorehitpause = 1

[State 4007 ,ダウン時アニメ変更]
Type = ChangeAnim2
Trigger1 = Anim = 5030
Trigger1 = Vel Y >= 0
Trigger1 = Pos Y >= 0
Value = 4007
ignorehitpause = 1

[State 4007 ,ダウン時Y軸リセット]
type = PosSet
trigger1 = Anim = 4007
y = 0
ignorehitpause = 1

[State 4007 ,ダウン時Y軸加速リセット]
type = VelSet
trigger1 = Anim = 4007
y = 0
ignorehitpause = 1

[State 4007 ,ダウン時Y軸加速リセット]
type = VelMul
trigger1 = Anim = 4007
x = 0.5
ignorehitpause = 1

[State 4007 ,ダウン時Y軸加速リセット]
type = VelMul
trigger1 = Anim = 4007
x = 0.5
ignorehitpause = 1

;/////////////////////////////////////
;  ここから22C空中処理
;/////////////////////////////////////

[State 4007, 演出合わせ用真っ黒]
Type = PalFx
trigger1 = Enemy(Enemy,Name!="Sacchin"),StateNo = 4023
trigger1 = Enemy(Enemy,Name!="Sacchin"),AnimElemTime(4) < 0
trigger2 = Enemy(Enemy,Name!="Sacchin"),StateNo = 4122
Add = -255,-255,-255
Time = 1
persistent = 256
ignorehitpause = 1

[State 4007, ライフ減算]
Type = LifeSet
trigger1 = Enemy(Enemy,Name!="Sacchin"),StateNo = 4023
trigger1 = Enemy(Enemy,Name!="Sacchin"),AnimElemTime(2) = 0
value = Floor( Life - (LifeMax*0.5) )
ignorehitpause = 1

[State 4007, 演出合わせ用真っ黒2]
Type = PalFx
trigger1 = Enemy(Enemy,Name!="Sacchin"),StateNo = 4023
trigger1 = Enemy(Enemy,Name!="Sacchin"),AnimElemTime(4) = [0,3]
Add = -200,-200,-200
Time = 1
persistent = 256
ignorehitpause = 1

[State 4007, 演出合わせ用真っ黒3]
Type = PalFx
trigger1 = Enemy(Enemy,Name!="Sacchin"),StateNo = 4023
trigger1 = Enemy(Enemy,Name!="Sacchin"),AnimElemTime(5) = [0,3]
Add = -150,-150,-150
Time = 1
persistent = 256
ignorehitpause = 1

[State 4007, 演出合わせ用真っ黒4]
Type = PalFx
trigger1 = Enemy(Enemy,Name!="Sacchin"),StateNo = 4023
trigger1 = Enemy(Enemy,Name!="Sacchin"),AnimElemTime(6) = [0,3]
Add = -50,-50,-50
Time = 1
persistent = 256
ignorehitpause = 1

[State 4007, アニメ変更]
Type = ChangeAnim2
trigger1 = Enemy(Enemy,Name!="Sacchin"),StateNo = 4023
trigger1 = Enemy(Enemy,Name!="Sacchin"),AnimElemTime(2) < 0
trigger2 = Enemy(Enemy,Name!="Sacchin"),StateNo = 4122
Value = 4024
elem = 1
ignorehitpause = 1

[State 4007, アニメ変更]
Type = ChangeAnim2
trigger1 = Enemy(Enemy,Name!="Sacchin"),StateNo = 4023
trigger1 = Anim = 4024
trigger1 = AnimTime = 0
Value = 4025
ignorehitpause = 1

[State 4007, アニメ変更]
Type = VelSet
Trigger1 = Anim = 4024
Trigger1 = AnimElemTime(1) = 1
X = 0
Y = -8
ignorehitpause = 1

[State 758, Gravity]
Type = VelAdd
Trigger1 = Anim = 4024
Trigger1 = AnimElemTime(1) > 1
Trigger2 = Anim = [4026,4027]
Y = 0.33
persistent = 256
ignorehitpause = 1

[State 4007, アニメ変更]
Type = ChangeAnim2
Trigger1 = Anim = 4025
Trigger1 = Vel Y <= 0
Value = 4026
ignorehitpause = 1

[State 4007, アニメ変更]
Type = ChangeAnim2
Trigger1 = Anim = 4026
Trigger1 = Pos Y >= -20
Value = 4027
ignorehitpause = 1

[State 4007, アニメ変更]
Type = VelSet
Trigger1 = Anim = 4027
Trigger1 = AnimElemTime(1) = 0
y = -2
ignorehitpause = 1

[State 4007, アニメ変更]
Type = SelfState
Trigger1 = Anim = 4027
Trigger1 = AnimElemTime(2) >= 0
trigger1 = Pos Y >= 0
value = 5110
ignorehitpause = 1

[State 4007, Time超過時戻し]
Type = SelfState
trigger1 = Time >= 600
value = 5050
ignorehitpause = 1

;///////////////////////////////////////////////////////////////////////////
;22A/22B当身成功時裏周り
;///////////////////////////////////////////////////////////////////////////
[Statedef 4008]
type = S
movetype = I
physics = N
ctrl  = 0
velset = 0,0

[State 4008, アニメ変更]
type = ChangeAnim
trigger1 = Anim != StateNo
value = StateNo

[State 4008]
type = AllPalFx
trigger1 = !IsHelper
trigger1 = AnimElemTime(1) = 0
Mul = 0,0,0
time = 10
ignorehitpause = 1

[State 4008, 当身]
type = ReversalDef
trigger1 = !IsHelper
reversal.attr = SCA,AA,AT,AP
ignorehitpause = 1

[State 4000, ナイフエフェクト]
type = Helper
trigger1 = !IsHelper
trigger1 = PrevStateNo = 4010
trigger1 = AnimElemTime(2) = 0
trigger1 = !NumHelper(4164)
StateNo = 4164
ID = 4164
name = "Explod_Helper"
helpertype = Player
keyctrl = 0
ownpal = 1
postype = p2
Pos = 0,-60
ignorehitpause = 1

[State 4000, びっくりエフェクト]
type = Explod
triggerall = AnimElemTime(1) = 0
trigger1 = !NumExplod(4163)
ID = 4163
Anim = 4163
postype = p1
pos = 0,-60
bindtime = 1
SprPriority = 4
RemoveOnGetHit = 1
SuperMoveTime = 2147483647
PauseMoveTime = 2147483647
ignorehitpause = 1

[State 6027, 位置移動]
type = Turn
triggerall = !IsHelper
triggerall = AnimElemTime(2) = 0
trigger1 = ( Pos X - EnemyNear,Pos X ) * ifelse( Facing=1 ,-1 ,1 ) < 0

[State 6027, 位置移動]
type = Posset
triggerall = !IsHelper
triggerall = AnimElemTime(1) = 1
trigger1 = NumHelper(99999)
trigger1 = Helper(99999),sysfvar(4) < 160
x = -(ScreenPos X-Pos X)*2

[State 6027, 位置移動]
type = Posset
triggerall = !IsHelper
triggerall = AnimElemTime(1) = 1
trigger1 = NumHelper(99999)
trigger1 = Helper(99999),sysfvar(4) > 160
x = (EnemyNear,Pos X) + ifelse( Facing=1 ,100 ,-100 )

[State 6027, びっくり音]
type = PlaySnd
trigger1 = !IsHelper
trigger1 = AnimElemTime(2) = 0
value = s0,64

[State 6027, 時止め]
type = SuperPause
trigger1 = !IsHelper
trigger1 = AnimElemTime(1) = 2
darken = 0
time = 30
anim = -1
pos = 0,0
movetime = 30
unhittable = 0
P2defmul = 1
ignorehitpause = 1

[State 4000, ]
type = SelfState
trigger1 = !AnimTime
value = 0
ctrl = 1

[Statedef 4164]
type = S
movetype = A
physics = N
ctrl  = 0

[State 6027, カメラ追従停止]
type = ScreenBound
trigger1 = 1
value = 0
persistent = 256
ignorehitpause = 1

[State 6027, カラー毎に眼の色に合うように変更]
type = ChangeAnim
trigger1 = Anim != 4164
value = 4164
ignorehitpause = 1

[State 4010, ナイフの飛ぶ音]
type = PlaySnd
trigger1 = IsHelper
trigger1 = AnimElemTime(2) = 0
value = s0,65
ignorehitpause = 1

[State 200, 1]
type = HitDef
triggerall = GameTime%2 = 0
trigger1 = AnimElemTime(1)>0
trigger1 = AnimElemTime(9)<1
attr = S, NA
damage = 50, 10
AnimType = Hard
GuardFlag = M
HitFlag = MAFD
Priority = 3, Hit
PauseTime = 0,60
Guard.PauseTime = 0,60
GetPower = 10
GivePower = 10,5
Guard.SparkNo = S4100
SparkNo = S4100+(Random%2)
SparkXY = 0, -40
HitSound = s0, 22
GuardSound = S0, 30
Ground.Type = High
Ground.SlideTime = 30
Ground.HitTime = 30
Guard.Slidetime = 20
Guard.Ctrltime = 20
Ground.Velocity = -4.3,-4.3
guard.velocity = -5
Guard.CornerPush.VelOff = -3.3
AirGuard.CornerPush.VelOff = -3.5
Air.Velocity = -2,-3.5
Fall = 1
Air.Fall = 1
Air.HitTime = 30
Fall.Recover = 0
persistent = 256

[State 200]
type = SelfState
trigger1 = !AnimTime
value = 2147483646
ignorehitpause = 1

[State 200]
type = SelfState
trigger1 = 1
value = ifelse( MoveType=I ,5150 ,120 )
ctrl = 0
ignorehitpause = 1

;///////////////////////////////////////////////////////////////////////////
;22B当身始動
;///////////////////////////////////////////////////////////////////////////
[Statedef 4010]
type = S
movetype = A
physics = N
ctrl  = 0

[State 4010, アニメ変更]
type = ChangeAnim
trigger1 = Anim != StateNo
value = StateNo

[State 4010, 当身]
type = ReversalDef
trigger1 = !IsHelper
reversal.attr = SCA,AA,AT,AP
pausetime = 0,0
ID = 4110
ignorehitpause = 1

[State 4010, 8席ヘルパーで埋まってしまったら捨てる]
type = TargetDrop
trigger1 = NumTarget > 8
trigger1 = Target,IsHelper

[State 4010, 当身成功時移動]
type = SelfState
trigger1 = NumTarget
trigger1 = !Target,IsHelper
value = 4008;4011

[State 4010, ]
type = SelfState
trigger1 = !AnimTime
value = 0
ctrl = 1

;///////////////////////////////////////////////////////////////////////////
;22B当身成功裏周り移動
;///////////////////////////////////////////////////////////////////////////
[Statedef 4011]
type = S
movetype = A
physics = N
ctrl  = 0

[State 4010, 当身]
type = ReversalDef
trigger1 = !IsHelper
reversal.attr = SCA
persistent = 256
ignorehitpause = 1

[State 4011, アニメ変更]
type = ChangeAnim
trigger1 = Anim != StateNo
value = StateNo
elem = 1 + 2*(PrevStateNo=4020)

[State 1000, Spark]
type = Explod
trigger1 = NumTarget(4020)
trigger1 = AnimElem = 3
Anim = 4161
ID = 4161
pos = 0,ceil(-105*const(size.yscale))
postype = P1
ownpal = 1
bindtime = -1
sprpriority = -106
removeongethit = 1
removetime = 25
SuperMovetime = 2147483646
PauseMoveTime = 2147483646

[State 230, 時止め管理ヘルパー]
type = Helper
triggerall = NumExplod(6061)
triggerall = !NumHelper(4162)
trigger1 = AnimElem = 3
ID = 4162
StateNo = 4162
name = "Explod_Helper"
helpertype = Player
keyctrl = 0
ownpal = 1
Pos = 0,0
SuperMovetime = 2147483646
PauseMoveTime = 2147483646
ignorehitpause = 1

[State 4900, 16]
type = ModifyExplod
triggerall = NumExplod(6061)
trigger1 = fvar(0) := fvar(0) + 0.2
ID = 4161
scale = fvar(0),fvar(0)
ignorehitpause = 1

[State 4011, 加速音]
type = PlaySnd
trigger1 = AnimElemTime(1) = 0
value = s0,6

[State 4011, 時止め音]
type = PlaySnd
trigger1 = NumExplod(6061)
trigger1 = AnimElemTime(3) = 0
value = s0,63

[State 4011, 加速音]
type = PlaySnd
trigger1 = AnimElemTime(3) = 0
value = s0,6

[State 4011, 加速]
type = VelSet
trigger1 = AnimElemTime(3) >= 0
x = 12

[State 1200, hitdef]
type = HitDef
Trigger1 = !NumTarget
trigger1 = AnimElemTime(3) > 0
attr = S,ST
hitflag = MAFD
guardflag = M
animtype = Back
priority = 3,hit
guard.pausetime = 0,0
hitsound = S5,1
sparkno = S7255
guard.sparkno = -1
sparkxy = 0,0
ground.type = High
guard.slidetime = 0
guard.ctrltime = 0
ground.velocity = 0,0
air.velocity = 0,0
guard.velocity = 0
p2facing = 1
fall = 0
fall.recover = 0
yaccel = .55
ID = 4011
kill = 0
getpower = 0
givepower = 15,15
p2StateNo = 4017

[State 4000, 砂塵エフェクト1]
type = Explod
trigger1 = AnimElemTime(3) = 0
ID = 4122
Anim = 4122
postype = p1
pos = 0,0
bindtime = 1
SprPriority = 4
RemoveOnGetHit = 1
ignorehitpause = 1

[State 4000, 砂塵エフェクト2]
type = Explod
trigger1 = AnimElemTime(3) = 0
ID = 4123
Anim = 4123
postype = p1
pos = -40,0
bindtime = -1
SprPriority = 4
RemoveOnGetHit = 1
ignorehitpause = 1

[State 4000, 敵ヘルパー取ったら全部捨てる]
type = TargetDrop
trigger1 = AnimElemTime(3) >= 0
trigger1 = NumTarget(4011)
trigger1 = Target,IsHelper
ignorehitpause = 1

[State 4011, 敵本体だけ取ったら壁叩きつけへ]
type = SelfState
trigger1 = AnimElemTime(3) >= 0
trigger1 = NumTarget(4011)
trigger1 = !Target,IsHelper
value = 4014

[State 4011, 戻る]
type = SelfState
trigger1 = !AnimTime
trigger1 = 1 || fvar(0) := 0
value = 101
ctrl = 0

[Statedef 4162]
type = S
movetype = I
physics = N
ctrl  = 0

[State 6027, カメラ追従停止]
type = ScreenBound
trigger1 = 1
value = 0
persistent = 256
ignorehitpause = 1

[State 6027, カラー毎に眼の色に合うように変更]
type = ChangeAnim
trigger1 = Anim != 4162
value = 4162
ignorehitpause = 1

[State 6027, カラー毎に眼の色に合うように変更]
type = PowerAdd
trigger1 = IsHelper
trigger1 = Root,var(2) > 0
value = -1
ignorehitpause = 1

[State 6027, カラー毎に眼の色に合うように変更]
type = BGPalFx
trigger1 = IsHelper
trigger1 = Root,var(2) > 0
time = 1
InvertAll = 1
ignorehitpause = 1

[State 200]
type = SelfState
trigger1 = Root,var(2) <= 0
value = 2147483646
ignorehitpause = 1

[State 200]
type = SelfState
trigger1 = 1
value = ifelse( MoveType=I ,5150 ,120 )
ctrl = 0
ignorehitpause = 1

;///////////////////////////////////////////////////////////////////////////
;22B当身成功裏周り移動後攻撃
;///////////////////////////////////////////////////////////////////////////
[Statedef 4012]
type = S
movetype = A
physics = S
ctrl = 0

[State 4012, アニメ変更]
type = ChangeAnim
trigger1 = Anim != [4012,4013]
value = StateNo

[State 4012, アニメ変更]
type = ChangeAnim
trigger1 = Anim = 4012
trigger1 = Anim != 4013
trigger1 = !AnimTime
value = 4013
ignorehitpause = 1

[State 4012, 初動加速]
type = VelSet
trigger1 = AnimElemTime(1) = 0
x = 8

[State 4012, 減速乗算]
type = VelMul
trigger1 = AnimElemTime(1) > 0
x = 0.5

[State 4012, 砂塵エフェクト]
type = Explod
trigger1 = AnimElemTime(3) = 0
ID = 4123
Anim = 4123
postype = p1
pos = 40,0
bindtime = -1
SprPriority = 4
RemoveOnGetHit = 1
ignorehitpause = 1

[State 4012, 振り向き]
type = Turn
trigger1 = AnimElemTime(5) = 0

[State 4012, 振り向き]
type = Turn
trigger1 = (Pos X-EnemyNear,Pos X)*-Facing < -60
trigger1 = AnimElemTime(5) = 0

[State 4012, 打撃エフェクト]
type = Explod
trigger1 = AnimElemTime(5) = 1
ID = 4124
Anim = 4124
postype = p1
pos = 40,0
bindtime = -1
SprPriority = 4
RemoveOnGetHit = 1
SuperMoveTime = 2147483647 * NumHelper(4162)
PauseMoveTime = 2147483647 * NumHelper(4162)
ignorehitpause = 1

[State 4012, 腕振り音]
type = PlaySnd
trigger1 = AnimElemTime(5) = 1
value = s0,51

[State 4012, 追加最終ヒット音]
type = PlaySnd
trigger1 = AnimElemTime(37) > 0
trigger1 = MoveHit = 1
value = s0,38

[State 4012, 振り向き]
type = MoveHitReset
trigger1 = 1

[State 4012, 攻撃]
type = HitDef
trigger1 = (AnimElemTime(8)=0)||(AnimElemTime(9)=0)||(AnimElemTime(10)=0)
trigger2 = (AnimElemTime(11)=0)||(AnimElemTime(12)=0)||(AnimElemTime(13)=0)
trigger3 = (AnimElemTime(14)=0)||(AnimElemTime(15)=0)||(AnimElemTime(16)=0)
trigger4 = (AnimElemTime(17)=0)||(AnimElemTime(18)=0)||(AnimElemTime(19)=0)
trigger5 = (AnimElemTime(20)=0)||(AnimElemTime(21)=0)||(AnimElemTime(22)=0)
trigger6 = (AnimElemTime(23)=0)||(AnimElemTime(24)=0)||(AnimElemTime(25)=0)
trigger7 = (AnimElemTime(26)=0)||(AnimElemTime(27)=0)||(AnimElemTime(28)=0)
trigger8 = (AnimElemTime(29)=0)||(AnimElemTime(30)=0)||(AnimElemTime(31)=0)
trigger9 = (AnimElemTime(32)=0)||(AnimElemTime(33)=0)||(AnimElemTime(34)=0)
trigger10= (AnimElemTime(35)=0)||(AnimElemTime(36)=0)||(AnimElemTime(37)=0)
attr = S, NA
damage = 7, 2
AnimType = Light
GuardFlag = M
HitFlag = MAFD
Priority = 3, Hit
PauseTime = 0,3
Guard.PauseTime = 0,3
GetPower = 10
GivePower = 10,5
Guard.SparkNo = S4100
SparkNo = S4100+(Random%2)
SparkXY = -8, -63
HitSound = s0, 19
GuardSound = S0, 30
Ground.Type = High
Ground.SlideTime = 15
Ground.HitTime = 15
Guard.Slidetime = 20
Guard.Ctrltime = 20
Ground.Velocity = -3,0
guard.velocity = -1
Guard.CornerPush.VelOff = -3.3
AirGuard.CornerPush.VelOff = -3.5
Air.Velocity = -3,-4
Fall = 1
Air.Fall = 1
Fall.Recover = 0
EnvShake.Time = 3
EnvShake.Freq = 3
EnvShake.Ampl = 5
EnvShake.Phase = 9

[State 4012, アニメ変更]
type = SelfState
trigger1 = Anim = 4013
trigger1 = !AnimTime
value = 0
ctrl = 1

;///////////////////////////////////////////////////////////////////////////
;22B敵本体取得からの壁運送中
;///////////////////////////////////////////////////////////////////////////
[Statedef 4014]
type = S
physics = N
movetype = A
ctrl = 0
sprpriority = 2

[State 4014 ,アニメ変更]
type = ChangeAnim
trigger1 = Anim != 4014
value = 4014
ignorehitpause = 1

[State 1210, targetbind]
type = VelSet
trigger1 = AnimElem = 1
x = 12

[State -2]
type = VelAdd
trigger1 = 1
x = .5
persistent = 256

[State 1210, width]
type = Width
trigger1 = 1
edge = 17,0

[State 1210, snd]
type = PlaySnd
trigger1 = AnimElem = 1
value = S0,16

[State 1210, end]
type = SelfState
trigger1 = FrontEdgeBodyDist <= 0
trigger2 = Time > 500
value = 4015

;///////////////////////////////////////////////////////////////////////////
;22B壁叩きつけ中
;///////////////////////////////////////////////////////////////////////////
[Statedef 4015]
type = S
physics = N
movetype = A
ctrl = 0
sprpriority = 2

[State 4015, アニメ変更]
type = ChangeAnim
trigger1 = Anim != [4015,4016]
value = 4015

[State 1211, width]
type = Width
trigger1 = Anim = 4015
trigger1 = AnimElem = 1
edge = 50,0

[State 1211, targetstate]
type = TargetState
trigger1 = Anim = 4015
trigger1 = NumTarget
trigger1 = AnimElem = 1
value = 4018

[State 1211, vel]
type = VelSet
trigger1 = Anim = 4015
trigger1 = AnimElem = 1
x = 0

[State 1211, vel]
type = PlaySnd
trigger1 = Anim = 4015
trigger1 = AnimElem = 2
value = s0,21

[State 1211, vel]
type = PlaySnd
trigger1 = Anim = 4015
trigger1 = AnimElem = 2
value = s0,38

[State 1211, vel]
type = PlaySnd
trigger1 = Anim = 4015
trigger1 = AnimElem = 2
value = s0,52

[State -2, shake]
type = EnvShake
trigger1 = Anim = 4015
trigger1 = AnimElem = 2
time = 12
freq = 60
ampl = -3

[State 1211, damage]
type = TargetLifeAdd
trigger1 = Anim = 4015
trigger1 = NumTarget
trigger1 = Animelem = 2
value = -150
kill = 1

[State 1211, explod]
type = Explod
trigger1 = Anim = 4015
trigger1 = Animelem = 2
Anim = 4100+Random%2
pos = 0,-60
postype = p2
sprpriority = 7
ownpal = 1
SuperMoveTime = 2147483647 * NumHelper(4162)
PauseMoveTime = 2147483647 * NumHelper(4162)

[State 1211, targetstate]
type = targetstate
trigger1 = Anim = 4015
trigger1 = NumTarget(4011)
trigger1 = Animelem = 5
value = 4019
ID = 4011

[State 1211, vel]
type = VelSet
trigger1 = Anim = 4015
trigger1 = Animelem = 6
x = const(velocity.run.back.x)
y = const(velocity.run.back.y)

[State 1211]
type = VelAdd
trigger1 = AnimElem = 6, >= 0
trigger1 = Vel X < -1
x = .40

[State 1211]
type = VelAdd
trigger1 = Anim = 4015
trigger1 = AnimElem = 6, > 0
y = .75

[State 1211, end]
type = ChangeAnim
triggerall = Anim = 4015
triggerall = AnimElemTime(6) > 0
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
value = 4016

[State 1211]
type = VelSet
trigger1 = Anim = 4016
x = 0
y = 0

[State 1211, end]
type = ChangeState
trigger1 = Anim = 4016
trigger1 = !AnimTime
value = 0
ctrl = 1

;///////////////////////////////////////////////////////////////////////////
;22B当身成功相手投げられ中
;///////////////////////////////////////////////////////////////////////////
[Statedef 4017]
type = S
physics = N
movetype = H
ctrl = 0
velset = 0,0
sprpriority = 3

[State -2]
type = SelfState
trigger1 = IsHelper
value = 2147483646
ignorehitpause = 1

[State 1210, targetbind]
type = PosSet
trigger1 = Enemy(Enemy,Name!="Sacchin"),StateNo = 4014
x = (EnemyNear,Pos X) + ifelse( Enemy(Enemy,Name!="Sacchin"),Facing=1 ,10 , -10 )
y = (EnemyNear,Pos Y) - 60
;	bindだと落下時にVelが入ってるのに降下しない不具合が出たので

[State -2]
type = SelfState
trigger1 = Enemy(Enemy,Name!="Sacchin"),StateNo != [4011,4016]
value = 5050

[State -2]
type = ScreenBound
trigger1 = 1
value = 1
movecamera = 1,0

[State -2]
type = ChangeAnim2
trigger1 = Anim != 4017
value = 4017

;///////////////////////////////////////////////////////////////////////////
;22B壁叩きつけ中
;///////////////////////////////////////////////////////////////////////////

[Statedef 4018]
type = A
physics = N
movetype = H
ctrl = 0
velset = 0,0
sprpriority = 1

[State -2]
type = DestroySelf
trigger1 = IsHelper
ignorehitpause = 1

[State -2]
type = SelfState
trigger1 = Enemy(Enemy,Name!="Sacchin"),StateNo != [4010,4016]
value = 5050

[State -2]
type = ScreenBound
trigger1 = 1
value = 1
movecamera = 1,0

[State -2]
type = ChangeAnim2
trigger1 = Anim != 4018
value = 4018

[State -2]
type = Width
trigger1 = 1
edge = 0,-100

[State 1210, targetbind]
type = PosSet
trigger1 = Enemy(Enemy,Name!="Sacchin"),StateNo = 4015
x = (EnemyNear,Pos X) + ifelse( Enemy(Enemy,Name!="Sacchin"),Facing=1 ,50 , -50 )
y = (EnemyNear,Pos Y) - 60
;	bindだと落下時にVelが入ってるのに降下しない不具合が出たので


;///////////////////////////////////////////////////////////////////////////
;22B壁叩きつけから
;///////////////////////////////////////////////////////////////////////////

[Statedef 4019]
type = A
physics = N
movetype = H
ctrl = 0
sprpriority = 0

[State -2]
type = DestroySelf
trigger1 = IsHelper
ignorehitpause = 1

[State -2]
type = SelfState
trigger1 = Enemy(Enemy,Name!="Sacchin"),StateNo != [4010,4016]
value = 5050

[State -2]
type = ScreenBound
trigger1 = 1
value = 1
movecamera = 1,0

[State -2]
type = ChangeAnim2
trigger1 = Anim != 4019
value = 4019

[State 1222, vel]
type = VelSet
trigger1 = AnimElem = 1
x = -2
y = -7.8

[State 1222, gravity]
type = VelAdd
trigger1 = AnimElemTime(1) > 0
y = .50

[State 1222, 0]
type = SelfState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
value = 5100

;///////////////////////////////////////////////////////////////////////////
;22C始動
;///////////////////////////////////////////////////////////////////////////
[Statedef 4020]
type = S
movetype = A
physics = N
ctrl  = 0

[State 4020, アニメ変更]
type = ChangeAnim
trigger1 = Anim != StateNo
value = StateNo

[State 4020, 本体のターゲット取得をしていたら変数セット]
type = null
trigger1 = NumTarget
trigger1 = !Target,IsHelper
trigger1 = var(0) := 1

[State 4000, 当身成功時移動 - 対空相手]
type = SelfState
triggerall = var(0) = 1
triggerall = NumTarget
triggerall = !Target,IsHelper
trigger1 = Target,StateType = A
trigger1 = Target,Pos Y < - 70
value = 4022

[State 4000, 当身成功時移動 - 上に当てはまらないなら対地投げ]
type = SelfState
triggerall = var(0) = 1
trigger1 = NumTarget
trigger1 = !Target,IsHelper
value = 4021

[State 4000, 当身成功時移動 - power3000以下なら時止め]
type = SelfState
triggerall = var(0) = 0
trigger1 = NumTarget
trigger1 = !Target,IsHelper
value = 4011

[State 4020, 8席ヘルパーで埋まってしまったら捨てる]
type = TargetDrop
trigger1 = NumTarget > 8
trigger1 = Target,IsHelper

[State 4020, 当身]
type = ReversalDef
trigger1 = !IsHelper
reversal.attr = SCA,AA,AT,AP
pausetime = 0,20
ID = 4120
ignorehitpause = 1

[State 4020, ]
type = SelfState
trigger1 = !AnimTime
value = 0
ctrl = 1

;///////////////////////////////////////////////////////////////////////////
; 22C成功時攻撃
;///////////////////////////////////////////////////////////////////////////
[Statedef 4021]
type = S
movetype = A
physics = N
ctrl  = 0
sprpriority = 3

[State 4021, アニメ変更]
type = ChangeAnim
trigger1 = Anim != StateNo
value = StateNo

[State 4021, 背景消去]
type = AssertSpecial
trigger1 = !IsHelper
flag = NoBG
flag2= NoFG
flag3= NoMusic

[State 4021, 試合時間停止]
type = AssertSpecial
trigger1 = !IsHelper
flag = TimerFreeze
flag2= GlobalNoShadow

[State 4021, 慣性消去]
type = VelSet
trigger1 = AnimElemTime(1) = 0
x = 0
y = 0
ignorehitpause = 1

[State 230, 眼光エフェクトヘルパー]
type = Helper
trigger1 = AnimElem = 1
ID = 4127
StateNo = 4127
name = "Explod_Helper"
helpertype = Player
keyctrl = 0
ownpal = 1
Pos = 13,-50
Size.XScale = 0.5
Size.YScale = 0.5
SuperMovetime = 2147483646
PauseMoveTime = 2147483646
ignorehitpause = 1

[State 4021, 時止め]
type = SuperPause
trigger1 = AnimElem = 1
darken = 0
time = 59
anim = -1
pos = 0,0
movetime = 59
unhittable = 0
ignorehitpause = 1

[State 4012, 砂塵エフェクト1]
type = Explod
trigger1 = AnimElemTime(5) = 0
ID = 4123
Anim = 4123
postype = p1
pos = 27,0
bindtime = -1
SprPriority = 4
SuperMovetime = 2147483646
PauseMoveTime = 2147483646
RemoveOnGetHit = 1
ignorehitpause = 1

[State 4012, 砂塵エフェクト2]
type = Explod
trigger1 = AnimElemTime(2) = 0
ID = 4122
Anim = 4122
postype = p1
pos = 0,0
bindtime = 1
SprPriority = 4
SuperMovetime = 2147483646
PauseMoveTime = 2147483646
RemoveOnGetHit = 1
ignorehitpause = 1

[State 4012, 一閃エフェクト]
type = Explod
trigger1 = AnimElemTime(3) = 0
ID = 4126
Anim = 4126
postype = back
pos = 0,0
bindtime = -1
SprPriority = 4
RemoveOnGetHit = 1
SuperMoveTime = 2147483647 * NumHelper(4162)
PauseMoveTime = 2147483647 * NumHelper(4162)
ignorehitpause = 1

[State 4021, 眼光SE]
type = PlaySnd
trigger1 = AnimElem = 1
value = s0,36
ignorehitpause = 1

[State 4021, 腕振り音]
type = PlaySnd
trigger1 = AnimElemTime(3) = 0
value = s0,2
ignorehitpause = 1

[State 4021, 腕振り音]
type = PlaySnd
trigger1 = AnimElemTime(3) = 0
value = s0,4
ignorehitpause = 1

[State 4021, ヒット時SE - 斬撃音]
type = PlaySnd
trigger1 = MoveHit = 1
value = s0,22
ignorehitpause = 1

[State 4021, ヒット時SE - 衝突音]
type = PlaySnd
trigger1 = MoveHit = 1
value = s0,38
ignorehitpause = 1

[State 4012, 血しぶきエフェクト]
type = Explod
trigger1 = MoveHit = 1
ID = 4128
Anim = 4128
postype = p2
pos = 0,-40
bindtime = -1
SprPriority = 4
RemoveOnGetHit = 1
SuperMoveTime = 2147483647 * NumHelper(4162)
PauseMoveTime = 2147483647 * NumHelper(4162)
ignorehitpause = 1

[State 4021, 加速]
type = VelSet
trigger1 = AnimElemTime(3) = 0
x = 21.6
ignorehitpause = 1

[State 4021 ,摩擦]
type = VelMul
trigger1 = AnimElemTime(3) > 0
x = 0.85
ignorehitpause = 1

[State 4021, 当身]
type = ReversalDef
trigger1 = !IsHelper
reversal.attr = SCA,AA,AT,AP
ignorehitpause = 1

[State 4021, 落下即死]
type = HitDef
TriggerAll = !IsHelper
TriggerAll = !MoveContact
Trigger1 = AnimElemTime(2) >= 10
Trigger1 = AnimElemTime(4) <= 2
attr = ,NA,SA,HA,NT,ST,HT,NP,SP,HP,AA,AT,AP
animtype  = Hard
damage    = 0
fall.damage = 500;2147483647
kill = 1
getpower  = 0
priority  = 9,hit
hitflag = MAFDP
guardflag = 
pauseTime = 0,0
guard.SparkNo = S4100
SparkNo = S4100+Random%2
sparkxy = 0,-40
hitsound   = S5,2
guardsound = S2,10
P2GetP1State = 0
P2StateNo = 5100
ground.slidetime = 2147483647
ground.hittime  = 2147483647
fall.recover = 0
ground.velocity = 25,25
guard.velocity = 0
air.cornerpush.veloff = 0
air.velocity = 25,25
airguard.velocity = 0, 0
envshake.Time = 20
envshake.Freq = 50
envshake.Ampl = 10
ignorehitpause = 1

[State 4021, ]
type = SelfState
trigger1 = !AnimTime
value = 0
ctrl = 1

[Statedef 4127]
type = S
movetype = I
physics = N
ctrl  = 0

[State 6027, 表示優先度変更]
type = SprPriority
trigger1 = 1
value = 7
persistent = 256
ignorehitpause = 1

[State 6027, カメラ追従停止]
type = ScreenBound
trigger1 = 1
value = 0
persistent = 256
ignorehitpause = 1

[State 6027, カラー毎に眼の色に合うように変更]
type = ChangeAnim
trigger1 = Anim != 4127
value = 4127
ignorehitpause = 1

[State 6027, カラー毎に眼の色に合うように変更]
type = PalFx
trigger1 = Root,PalNo = 1
time = -1
Add = 255,-255,-255
ignorehitpause = 1

[State 200]
type = SelfState
trigger1 = !AnimTime
value = 2147483646
ignorehitpause = 1

[State 200]
type = SelfState
trigger1 = 1
value = ifelse( MoveType=I ,5150 ,120 )
ctrl = 0
ignorehitpause = 1

;///////////////////////////////////////////////////////////////////////////
;22C当身成功時対空投げ始動
;///////////////////////////////////////////////////////////////////////////
[Statedef 4022]
type = A
movetype = A
physics = N
ctrl  = 0

[State 4004, アニメ変更]
type = ChangeAnim
trigger1 = !IsHelper
trigger1 = Anim != StateNo
value = StateNo
ignorehitpause = 1

[State 4021, 時止め]
type = SuperPause
trigger1 = AnimElem = 1
darken = 0
time = 71
anim = -1
pos = 0,0
movetime = 71
unhittable = 0
ignorehitpause = 1

[State 4021, 眼光SE]
type = PlaySnd
trigger1 = AnimElem = 1
value = s0,36
ignorehitpause = 1

[State 230, 眼光エフェクトヘルパー]
type = Helper
trigger1 = AnimElem = 1
ID = 4127
StateNo = 4127
name = "Explod_Helper"
helpertype = Player
keyctrl = 0
ownpal = 1
Pos = 13,-50
Size.XScale = 0.5
Size.YScale = 0.5
SuperMovetime = 2147483646
PauseMoveTime = 2147483646
ignorehitpause = 1

[State 4004, 腕振り音]
type = PlaySnd
trigger1 = !IsHelper
trigger1 = AnimElem = 2
value = s0,8
ignorehitpause = 1

[State 4004, 角度変更]
type = Angledraw
triggerall = !IsHelper
triggerall = AnimElemTime(2) >= 0
triggerall = AnimElemTime(5) <= 5
trigger1 = 1||fvar(0) := Abs( Pos X - EnemyNear,Pos X )
trigger1 = 1||fvar(1) := Abs( Pos Y - EnemyNear,Pos Y)
trigger1 = 1||var(1)  := floor( Atan(fvar(0)/fvar(1))*(180/Pi) )
value = 42-var(1)
persistent = 256
ignorehitpause = 1

[State 4004, 速度変更]
type = VelSet
triggerall = !IsHelper
triggerall = AnimElemTime(2) > 0
trigger1 = AnimElemTime(5) <= 5
x = Sin(var(1)/(180/Pi))*46
y = -Cos(var(1)/(180/Pi))*46
persistent  =256
ignorehitpause = 1

[State 4000, 埃エフェクト]
type = Explod
trigger1 = AnimElemTime(2) = 1
ID = 4109
anim = ifelse( (42-var(1)=[37,47]) ,6011 ,6009 )
postype = p1
pos = 0,0
bindtime = 1
SprPriority = 4
RemoveOnGetHit = 1
ignorehitpause = 1

[State 800, 1]
type = HitDef
Trigger1 = 1
Attr = S, ST
HitFlag = MAFD
priority = 1, Miss
sparkno = -1
p2facing = 1
p1StateNo = 4023
p2StateNo = 4007
fall = 1
persistent = 256

[State 4000, 腕振り音]
type = PlaySnd
trigger1 = !IsHelper
trigger1 = AnimElem = 2
value = s0,2
ignorehitpause = 1

[State 4000, 重力開始]
type = StateTypeSet
trigger1 = !IsHelper
trigger1 = AnimElemTime(7) = 0
physics = A
ignorehitpause = 1

[State 4000, 重力開始]
type = SelfState
trigger1 = !IsHelper
trigger1 = Anim = StateNo
trigger1 = AnimElemTime(10) >= 0
trigger1 = Pos Y > -15
trigger1 = Vel Y > 0
value = 52
ctrl  = 1
ignorehitpause = 1

;///////////////////////////////////////////////////////////////////////////
;22C当身成功対空投げ成功
;///////////////////////////////////////////////////////////////////////////
[Statedef 4023]
type = A
movetype = A
physics = N
ctrl  = 0

[State 4023, 速度調整]
Type = VelSet
trigger1 = Anim != StateNo
x = 0
y = 0
ignorehitpause = 1

[State 4023, 白フェードイン用Explod]
type = Explod
trigger1 = !IsHelper
trigger1 = Anim != StateNo
ID = 4130
Anim = 4130
postype = Back
ownpal = 1
pos = 0,0
bindtime = -1
SprPriority = 7
RemoveOnGetHit = 1
SuperMoveTime = 2147483647
PauseMoveTime = 2147483647
ignorehitpause = 1

[State 4023, アニメ変更]
type = ChangeAnim
trigger1 = !IsHelper
trigger1 = Anim != StateNo
value = StateNo
ignorehitpause = 1

[State 4023, 演出合わせ用真っ黒]
Type = PalFx
trigger1 = AnimElemTime(4) < 0
Add = -255,-255,-255
Time = 1
persistent = 256
ignorehitpause = 1

[State 4023, 演出合わせ用真っ黒2]
Type = PalFx
trigger1 = AnimElemTime(4) = [0,3]
Add = -200,-200,-200
Time = 1
persistent = 256
ignorehitpause = 1

[State 4023, 演出合わせ用真っ黒3]
Type = PalFx
trigger1 = AnimElemTime(5) = [0,3]
Add = -150,-150,-150
Time = 1
persistent = 256
ignorehitpause = 1

[State 4023, 演出合わせ用真っ黒4]
Type = PalFx
trigger1 = AnimElemTime(6) = [0,3]
Add = -50,-50,-50
Time = 1
persistent = 256
ignorehitpause = 1

[State 4023, 位置調整]
Type = PosSet
trigger1 = Anim = StateNo
Trigger1 = AnimElemTime(1) = 0
Y = -70
X = 0
ignorehitpause = 1

[State 4023, 相手位置調整]
Type = TargetBind
trigger1 = Anim = StateNo
Trigger1 = AnimElemTime(1) = 0
Pos = 0,0
ignorehitpause = 1

[State 4023, 位置調整]
Type = PosSet
trigger1 = Anim = StateNo
Trigger1 = AnimElemTime(1) = 1
Y = (EnemyNear,Pos Y) + ( EnemyNear,Const(Size.Head.Pos.Y) )
ignorehitpause = 1

[State 4023, 角度変更]
type = Angledraw
triggerall = !IsHelper
trigger1 = AnimElemTime(2) < 0
value = -42
persistent = 256
ignorehitpause = 1

[State 4023, 魔眼SE]
type = PlaySnd
trigger1 = AnimElem = 1
value = s0,35
ignorehitpause = 1

[State -1, EnvShake]
Type = EnvShake
Trigger1 = AnimElemTime(2) = 0
Time = 5
Freq = 80
Ampl = 20
ignorehitpause = 1

[State 4023, 背景真っ赤]
type = BGPalFx
triggerall = !IsHelper
trigger1 = AnimElemTime(3) <= 8
trigger1 = 1 || var(1) := 0
trigger2 = AnimElemTime(4) = [0,3]
trigger2 = 1 || var(1) := 50
trigger3 = AnimElemTime(5) = [0,3]
trigger3 = 1 || var(1) := 100
trigger4 = AnimElemTime(6) = [0,3]
trigger4 = 1 || var(1) := 150
add = 255-var(1),-255+var(1),-255+var(1)
time = 1
ignorehitpause = 1

[State 4012, 血しぶきエフェクト]
type = Explod
trigger1 = AnimElem = 2
ID = 4129
Anim = 4129
postype = p1
pos = 0,0
bindtime = 1
SprPriority = 4
RemoveOnGetHit = 1
SuperMoveTime = 2147483647 * NumHelper(4162)
PauseMoveTime = 2147483647 * NumHelper(4162)
ignorehitpause = 1

[State 4012, 血しぶきエフェクト]
type = Explod
trigger1 = AnimElem = 2
ID = 4132
Anim = 4132
postype = p1
pos = 0,0
bindtime = 1
SprPriority = 4
RemoveOnGetHit = 1
SuperMoveTime = 2147483647 * NumHelper(4162)
PauseMoveTime = 2147483647 * NumHelper(4162)
ignorehitpause = 1

[State 4000, 腕振り音]
type = PlaySnd
trigger1 = !IsHelper
trigger1 = AnimElem = 2
value = s0,4
ignorehitpause = 1

[State 4000, 骨折音]
type = PlaySnd
trigger1 = !IsHelper
trigger1 = AnimElem = 2
value = s0,23
ignorehitpause = 1

[State 4000, 極死用SE1]
type = PlaySnd
trigger1 = !IsHelper
trigger1 = AnimElem = 2
value = s0,25
ignorehitpause = 1

[State 4000, 極死用SE2]
type = PlaySnd
trigger1 = !IsHelper
trigger1 = AnimElem = 2
value = s0,26
ignorehitpause = 1

[State 4000, 極死用SE2]
type = PlaySnd
trigger1 = !IsHelper
trigger1 = AnimElem = 2
value = s0,38
ignorehitpause = 1

[State 4000, 極死用SE2]
type = PlaySnd
trigger1 = !IsHelper
trigger1 = AnimElem = 2
value = s0,22
ignorehitpause = 1

[State -1, 振り切ったら加速]
Type = VelSet
trigger1 = Anim = StateNo
Trigger1 = AnimElemTime(2) = 1
x = 6
y = -3
ignorehitpause = 1

[State -1, 重力加速]
Type = VelAdd
trigger1 = Anim = StateNo
Trigger1 = AnimElemTime(2) > 1
y = 0.53
ignorehitpause = 1

[State 4000, 重力開始]
type = Turn
trigger1 = !IsHelper
trigger1 = Anim = StateNo
trigger1 = AnimElemTime(10) >= 0
trigger1 = Pos Y > -15
trigger1 = Vel Y > 0
ignorehitpause = 1

[State 4000, 重力開始]
type = SelfState
trigger1 = !IsHelper
trigger1 = Anim = StateNo
trigger1 = AnimElemTime(10) >= 0
trigger1 = Pos Y > -15
trigger1 = Vel Y > 0
value = 52
ctrl  = 0
ignorehitpause = 1


;---------------------------------------------------------------------------
;	236A
;---------------------------------------------------------------------------
[StateDef 4030]
type = S
MoveType = A
physics = S
ctrl = 0
sprpriority = 3

[State 210, アニメ変更]
type = ChangeAnim
trigger1 = Anim != StateNo
value = StateNo
ignorehitpause = 1

[State 210, 腕振り音]
type = Playsnd
trigger1 = AnimElem = 4
value = s0,2

[State 210, 初動微妙に動くためのやつ]
type = posadd
trigger1 = AnimElem = 2
x = 8

[State 210, 腕振った瞬間に加速]
type = VelSet
trigger1 = AnimElem = 4
x = 12

[State 210, 風切り音]
type = PlaySnd
trigger1 = AnimElem = 4
value = s0,46

[State 210, エフェクト兼攻撃ヘルパー]
type = Helper
trigger1 = AnimElem = 4
ID = 4107
StateNo = 4107
name = "Explod_Helper"
helpertype = Player
keyctrl = 0
ownpal = 0
SuperMoveTime = 2147483647 * NumHelper(4162)
PauseMoveTime = 2147483647 * NumHelper(4162)
ignorehitpause = 1

[State 210, エフェクト兼攻撃ヘルパー]
type = Helper
trigger1 = AnimElem = 4
ID = 4109
StateNo = 4107
name = "Explod_Helper"
helpertype = Player
keyctrl = 0
ownpal = 0
SuperMoveTime = 2147483647 * NumHelper(4162)
PauseMoveTime = 2147483647 * NumHelper(4162)
ignorehitpause = 1

[State 200]
type = SelfState
trigger1 = !AnimTime
value = 0
ctrl = 1

[Statedef 4107]
type = S
movetype = A
physics = N
SprPriority = 4
movehitpersist = 1
hitdefpersist = 1

[State 6007, 2]
type = SprPriority
trigger1 = IsHelper(4107)
value = 4
ignorehitpause = 1

[State 6007, 2]
type = SprPriority
trigger1 = IsHelper(4109)
value = 5
ignorehitpause = 1

[State 6007, 2]
type = PlayerPush
trigger1 = 1
value = 0
ignorehitpause = 1

[State 6007, 2]
type = BindToRoot
trigger1 = Root,Anim = 4030
time = 1
ignorehitpause = 1

[State 6007, 1]
type = ChangeAnim
trigger1 = IsHelper(4107)
trigger1 = Anim != 4107
value = 4107
ignorehitpause = 1

[State 6007, 1]
type = ChangeAnim
trigger1 = IsHelper(4109)
trigger1 = NumHelper(4107)
trigger1 = Anim != 4107
value = 4145
elem = Helper(4107),AnimElemNo(0)
ignorehitpause = 1

[State 200, 1]
type = HitDef
triggerall = IsHelper(4107)
trigger1 = !MoveContact
trigger1 = AnimElemTime(10) < 0
attr = S, NA
damage = 100, 10
AnimType = Light
GuardFlag = M
HitFlag = MAFD
Priority = 3, Hit
PauseTime = 6,6
Guard.PauseTime = 6,6
GetPower = 10
GivePower = 10,5
Guard.SparkNo = S4100
SparkNo = S4100+(Random%2)
SparkXY = -8, -63
HitSound = s0, 22
GuardSound = S0, 30
Ground.Type = High
Ground.SlideTime = 50
Ground.HitTime = 50
Guard.Slidetime = 50
Guard.Ctrltime = 50
Ground.Velocity = 0
guard.velocity = 0
Ground.CornerPush.Veloff = 0
Guard.CornerPush.VelOff = 0
AirGuard.CornerPush.VelOff = 0
Air.Velocity = 0,-1
Air.Fall = 1
Fall.RecoverTime = 30

[State 200, 1]
type = HitDef
triggerall = IsHelper(4107)
triggerall = MoveContact
triggerall = AnimElemTime(10) < 0
triggerall = var(0) <= 4
trigger1 = var(0) := var(0) + 1
attr = S, NA
damage = 5, 2
AnimType = Light
GuardFlag = M
HitFlag = MAFD
Priority = 3, Hit
PauseTime = 6,6*!(var(0)=5)
Guard.PauseTime = 6,6
GetPower = 10
GivePower = 10,5
Guard.SparkNo = S4100
SparkNo = S4100+(Random%2)
SparkXY = -8, -63
HitSound = s0, 22
GuardSound = S0, 30
Ground.Type = High
Ground.SlideTime = 21
Ground.HitTime = 21
Guard.Slidetime = 25
Guard.Ctrltime = 25
Ground.Velocity = -5.3*(var(0)=5)
guard.velocity = -5*(var(0)=5)
Ground.CornerPush.Veloff = 0
Guard.CornerPush.VelOff = 0
AirGuard.CornerPush.VelOff = 0
Air.Velocity = -2*(var(0)=5),-2-(3.5*(var(0)=5))
Air.Fall = 1
Fall.RecoverTime = 30

[State 6007, 2]
type = Trans
triggerall = IsHelper(4107)
trigger1 = 1
trans = add
persistent = 256
ignorehitpause = 1

[State 6007, 2]
type = Trans
triggerall = IsHelper(4109)
trigger1 = 1
trans = sub
persistent = 256
ignorehitpause = 1

[State 200]
type = SelfState
trigger1 = !AnimTime
value = 2147483646
ignorehitpause = 1

[State 200]
type = SelfState
trigger1 = 1
value = ifelse( MoveType=I ,5150 ,120 )
ctrl = 0
ignorehitpause = 1

;---------------------------------------------------------------------------
;	236B
;---------------------------------------------------------------------------
[StateDef 4035]
type = S
MoveType = A
physics = S
ctrl = 0

[State 4035, 差分決定]
type = Null
trigger1 = var(1) := 4165
; 無界の石柱
trigger1 = Random%2 = 0
trigger1 = var(1) := 4175
; 毛利の矢
trigger1 = Random%4 = 0
trigger1 = var(1) := 4135
; 神オロチの髑髏柱
trigger1 = Random%16 = 0
trigger1 = var(1) := 4171
; 姫アルクのかぜ
trigger1 = Random%256 = 0
trigger1 = var(1) := 4172
; 鬼巫女の賽銭箱

[State 210, アニメ変更]
type = ChangeAnim
triggerall = Anim != StateNo
trigger1 = 1 || var(0) := 0
value = StateNo
ignorehitpause = 1

[State 210, アニメ変更]
type = ChangeAnim
triggerall = Anim = StateNo
triggerall = (Command="a")||(Command="b")||(Command="c")
trigger1 = var(0) := ifelse( (AnimElemTime(4)>=0)&&(AnimElemTime(6)<=3) ,5 ,1 )
value = StateNo
elem = var(0)
ignorehitpause = 1

[State 210, エフェクト兼攻撃ヘルパー]
type = Helper
trigger1 = AnimElemTime(1) = 1
ID = var(1);4035
StateNo = var(1);4035
name = "Explod_Helper"
helpertype = Player
Postype = P2
Pos = 0,0
keyctrl = 0
ownpal = 0
ignorehitpause = 1

[State 210, エフェクト兼攻撃ヘルパー - ループ用]
type = Helper
triggerall = AnimElemTime(5) = 0
triggerall = var(0) = 5
trigger1 = 1 || var(0) := 0
ID = var(1);4035
StateNo = var(1);4035
name = "Explod_Helper"
helpertype = Player
Postype = P2
Pos = 0,0
keyctrl = 0
ownpal = 0
ignorehitpause = 1

[State 210, エフェクト兼攻撃ヘルパー - 弓矢用1]
type = Helper
trigger1 = AnimElemTime(1) = 1
trigger1 = var(1) = 4175
ID = var(1);4035
StateNo = var(1);4035
name = "Explod_Helper"
helpertype = Player
Postype = P2
Pos = 0,0
keyctrl = 0
ownpal = 0
ignorehitpause = 1

[State 210, エフェクト兼攻撃ヘルパー - 弓矢用2]
type = Helper
triggerall = AnimElemTime(5) = 0
triggerall = var(0) = 5
triggerall = var(1) = 4175
trigger1 = 1 || var(0) := 0
ID = var(1);435
StateNo = var(1);4035
name = "Explod_Helper"
helpertype = Player
Postype = P2
Pos = 0,0
keyctrl = 0
ownpal = 0
ignorehitpause = 1

[State 210, エフェクト兼攻撃ヘルパー - 弓矢用3]
type = Helper
triggerall = var(1) = 4175
trigger1 = AnimElemTime(1) = 1
ID = var(1);4035
StateNo = var(1);4035
name = "Explod_Helper"
helpertype = Player
Postype = P2
Pos = 0,0
keyctrl = 0
ownpal = 0
ignorehitpause = 1

[State 210, エフェクト兼攻撃ヘルパー - 弓矢用4]
type = Helper
triggerall = var(1) = 4175
triggerall = AnimElemTime(5) = 0
triggerall = var(0) = 5
trigger1 = 1 || var(0) := 0
ID = var(1);6035
StateNo = var(1);6035
name = "Explod_Helper"
helpertype = Player
Postype = P2
Pos = 0,0
keyctrl = 0
ownpal = 0
ignorehitpause = 1

[State 200]
type = SelfState
trigger1 = !AnimTime
value = 0 + (var(0):=0)
ctrl = 1

;---------------------------------------------------------------------------
;	髑髏柱

[Statedef 4135]
type = A
movetype = A
physics = N
SprPriority = 4
movehitpersist = 1
hitdefpersist = 1

[State 6035, 2]
type = SprPriority
trigger1 = 1
value = 7
ignorehitpause = 1

[State 6035, 2]
type = PosSet
trigger1 = 1
Y = 0
ignorehitpause = 1

[State 6035, 2]
type = ScreenBound
trigger1 = 1
value = 0
ignorehitpause = 1

[State 6035, 2]
type = PlayerPush
trigger1 = 1
value = 0
ignorehitpause = 1

[State 6035, 1]
type = ChangeAnim
trigger1 = Anim != 4135
value = 4135
ignorehitpause = 1

[State 210, 腕振り音]
type = Playsnd
trigger1 = AnimElemTime(1) = 0
value = s0,55
volume = 100

[State 6035, 2]
type = PosSet
trigger1 = AnimElemTime(1) = 0
x = EnemyNear,Pos X
ignorehitpause = 1

[State 6035]
type = playsnd
trigger1 = animelem = 12
value = s0,54
volume = 80

[State 6035]
type = playsnd
trigger1 = animelem = 12
value = s0,56
volume = 80

[State 6035]
type = playsnd
trigger1 = animelem = 12
value = s0,53
volume = 80

[State 6035 ,柱]
type = Explod
trigger1 = animelem = 12
Anim = 4136
ID = 4136
sprpriority = 3
postype = p1
pos = 0,5
bindtime = 1
supermove = 0
ignorehitpause = 1
under = 0

[State 6035 ,火柱]
type = Explod
trigger1 = animelem = 14
Anim = 4137
ID = 4137
sprpriority = 3
postype = p1
pos = 0,0
bindtime = 1
removetime = 5
supermove = 0
ignorehitpause = 1
under = 0

[State 6035 ,どくろちゃん]
type = Explod
trigger1 = animelem = 14
Anim = 4138
sprpriority = 6
postype = p1
pos = 0,-100
bindtime = 1
supermove = 0
ignorehitpause =1
under = 0

[State 6035 ,火柱]
type = Explod
trigger1 = animelem = 14
Anim = 4137
ID = 4137
sprpriority = 3
postype = p1
pos = 0,30
bindtime = 1
removetime = 15
supermove = 0
scale = 0.8,0.8
ignorehitpause = 1
under = 0

[State 6035]
type = Explod
trigger1 = animelem = 14
Anim = 4137
ID = 4137
sprpriority = 3
postype = p1
pos = 0,0
bindtime = 1
removetime = 20
supermove = 0
scale = 0.6,0.6
ignorehitpause = 1
under = 0

[State 6035]
type = Explod
trigger1 = animelem = 14
Anim = 4137
ID = 4137
sprpriority = 2
postype = p1
pos = 0,0
bindtime = 1
removetime = 25
supermove = 0
scale = 0.3,0.3
ignorehitpause = 1
under = 0

[State 6035]
type = Explod
triggerall = AnimElemtime(12) >= 0
trigger1 = GameTime%2 = 1
Anim = 4139
sprpriority = 7
postype = p1
pos = ifelse(Random%2, Random%56 ,-Random%56 ),-Random%61
bindtime = 1
under = 0
ownpal = 1
persistent = 1
ignorehitpause = 1
vel = 0,-3
SuperMoveTime = 9999
PauseMoveTime = 9999

[State 1]
type = HitDef
trigger1 = !MoveContact
trigger1 = AnimElemTime(14) > 0
attr = S, NA
numhits = 1
animtype  = hard
damage    = Ceil(0.005 * enemy,Const(data.life)),Ceil(0.001 * enemy,Const(data.life))
getpower = 20,20
givepower = 0,0
guardflag = H
hitflag = MAF
pausetime = 2,4
SparkNo = S4100+(Random%2)
sparkxy = -7, -70
hitsound   = s0,52
guardsound = s0,30
ground.type = high
ground.slidetime = 18
ground.hittime  = 18
ground.velocity = -0.5,-17
air.velocity = -0.5,-17
yaccel = .5
fall = 1
fall.recover = 0
p2StateNo = 4033

[State 6007, 2]
type = TargetState
trigger1 = NumTarget
trigger1 = MoveHit = 1
trigger1 = !Target,IsHelper
value = 4033
ignorehitpause = 1

[State 6007, 2]
type = Trans
trigger1 = 1
trans = add
persistent = 256
ignorehitpause = 1

[State 200]
type = SelfState
trigger1 = !AnimTime
value = 2147483646
ignorehitpause = 1

[State 200]
type = SelfState
trigger1 = 1
value = ifelse( MoveType=I ,5150 ,120 )
ctrl = 0
ignorehitpause = 1

;---------------------------------------------------------------------------
;	石柱

[Statedef 4165]
type = U
movetype = A
physics = N
SprPriority = 4
movehitpersist = 1
hitdefpersist = 1

[state 6035]
type = ChangeAnim
trigger1 = Anim != [4165,4169]
value = ifelse( Random%128=0, 4168 , ifelse( Random%2 ,4165 ,4166 ) )
ignorehitpause = 1

[State 6035, 2]
type = ScreenBound
trigger1 = 1
value = 0
ignorehitpause = 1

[state 6035]
type = StateTypeSet
trigger1 = Anim = 4165
trigger2 = Anim = 4167 || Anim = 4169
StateType = S
ignorehitpause = 1

[state 6035]
type = StateTypeSet
trigger1 = Anim = 4166
StateType = A
ignorehitpause = 1

[state 6035]
type = PlaySnd
triggerall = AnimElemTime(1) = 1
trigger1 = Anim = 4166 || Anim = 4168
value = s0,71
ignorehitpause = 1

[state 6035]
type = PlaySnd
triggerall = AnimElemTime(1) = 1
trigger1 = Anim = 4165
trigger2 = Anim = 4167 || Anim = 4169
value = s0,66
volume = 255
ignorehitpause = 1

[state 6035]
type = PosSet
triggerall = AnimElemTime(1) = 0
trigger1 = Anim = 4165
trigger2 = Anim = 4166 || Anim = 4168
Y = ifelse( Anim=4165 ,0 ,-360 )
ignorehitpause = 1

[state 6035]
type = VelAdd
trigger1 = Anim = 4166 || Anim = 4168
trigger1 = AnimElemTime(1) > 0
Y = 1.26
ignorehitpause = 1

[state 6035]
type = VelSet
trigger1 = Anim = 4167 || Anim = 4169
Y = 0
ignorehitpause = 1

[state 6035]
type = PosSet
trigger1 = Anim = 4167 || Anim = 4169
Y = 0
ignorehitpause = 1

[state 6035]
type = ChangeAnim
trigger1 = Anim = 4166 || Anim = 4168
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
value = ifelse( Anim=4166 ,4167 ,4169 )
ignorehitpause = 1

[State 1011, 石柱ダメージ]
type = HitDef
trigger1 = Anim != 4168
trigger1 = !MoveContact
attr = S, SP
numhits = 2
hitflag = MAF
guardflag = MA
animtype  = diagup
damage    = 25,5
pausetime = 0,0
SparkNo = S4100+Random%2
guard.SparkNo = S4184
sparkxy = -20,ifelse(hitcount = 0, -60,-100)
hitsound   = S0,15
guardsound = S0,30
ground.type = high
ground.slidetime = 10
ground.hittime  = 11
ground.velocity = -5,-7
air.velocity = -2.5,-3.5
fall = 1
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
persistent = 0
getpower = 142,600
givepower = 10,47

[State 1011, さっちん用ダメージ]
type = HitDef
trigger1 = Anim = 4168
trigger1 = !MoveContact
attr = S, SP
numhits = 2
hitflag = MAF
guardflag = 
animtype  = diagup
damage    = 25,150
fall.damage = 150
pausetime = 0,0
SparkNo = S4100+Random%2
guard.SparkNo = S4184
sparkxy = -20,ifelse(hitcount = 0, -60,-100)
hitsound   = S0,15
guardsound = S0,30
ground.type = high
ground.slidetime = 10
ground.hittime  = 11
ground.velocity = -5,12
air.velocity = -2.5,14
fall = 1
air.fall = 1
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
persistent = 0
getpower = 142,600
givepower = 10,47

[State 6035]
type = SelfState
triggerall = !AnimTime
trigger1 = Anim = 4165
trigger2 = Anim = 4167
trigger3 = Anim = 4169
value = 2147483646
ignorehitpause = 1

[State 6035]
type = SelfState
trigger1 = 1
value = ifelse( MoveType=I ,5150 ,120 )
ctrl = 0
ignorehitpause = 1

;---------------------------------------------------------------------------
;	かぜ

[Statedef 4171]
type = S
movetype = A
physics = N
SprPriority = 4
movehitpersist = 1
hitdefpersist = 1

[state 6035]
type = ChangeAnim
trigger1 = Anim != StateNo
value = StateNo
ignorehitpause = 1

[State 6035, 2]
type = PlayerPush
trigger1 = 1
value = 0
ignorehitpause = 1

[State 6035, 2]
type = PosSet
trigger1 = 1
Y = 0
ignorehitpause = 1

[State 6035, 2]
type = ScreenBound
trigger1 = 1
value = 0
ignorehitpause = 1

[state 6035]
type = PlaySnd
trigger1 = AnimElemTime(1) = 0
value = s0,69
ignorehitpause = 1

[state 6035]
type = PlaySnd
trigger1 = GameTime%5 = 0
trigger1 = AnimElemTime(16) < 0
value = s0,46
ignorehitpause = 1

[State 1011,]
type = HitDef
trigger1 = GameTime%5 = 0
trigger1 = AnimElemTime(41) < 0
attr = S, SP
numhits = 2
hitflag = MAF
guardflag = MA
animtype  = diagup
damage    = 25,5
pausetime = 0,15
SparkNo = S4100+Random%2
guard.SparkNo = S4184
sparkxy = -20,ifelse(hitcount = 0, -60,-100)
hitsound   = S0,22
guardsound = S0,30
ground.type = high
ground.slidetime = 10
ground.hittime  = 11
ground.velocity = -5,-7
air.velocity = -2.5,-3.5
fall = 1
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
persistent = 0
getpower = 142,600
givepower = 10,47

[State 6035]
type = SelfState
trigger1 = !AnimTime
value = 2147483646
ignorehitpause = 1

[State 6035]
type = SelfState
trigger1 = 1
value = ifelse( MoveType=I ,5150 ,120 )
ctrl = 0
ignorehitpause = 1

;---------------------------------------------------------------------------
;	賽銭箱

[Statedef 4172]
type = S
movetype = A
physics = N
SprPriority = 4
movehitpersist = 1
hitdefpersist = 1

[state 6035]
type = ChangeAnim
trigger1 = Anim != [4172,4173]
value = StateNo
ignorehitpause = 1

[State 6035, 2]
type = PlayerPush
trigger1 = 1
value = 0
ignorehitpause = 1

[State 6035, 2]
type = ScreenBound
trigger1 = 1
value = 0
ignorehitpause = 1

[state 6035]
type = PlaySnd
trigger1 = MoveHit = 1
trigger1 = RoundState = 3
trigger1 = NumTarget
trigger1 = Target,Alive = 0
value = s0,70
ignorehitpause = 1

[state 6035]
type = PlaySnd
trigger1 = Anim = 4172
trigger1 = AnimElemTime(1) = 0
value = s0,67
ignorehitpause = 1

[state 6035]
type = PosSet
trigger1 = Anim = 4172
trigger1 = AnimElemTime(1) = 0
Y = -360
ignorehitpause = 1

[state 6035]
type = VelAdd
trigger1 = Anim = 4172
trigger1 = AnimElemTime(1) > 0
Y = 1.56
ignorehitpause = 1

[state 6035]
type = VelSet
trigger1 = Anim = 4173
Y = 0
ignorehitpause = 1

[state 6035]
type = PosSet
trigger1 = Anim = 4173
Y = 0
ignorehitpause = 1

[state 6035]
type = PlaySnd
trigger1 = Anim = 4173
trigger1 = AnimElemTime(1) = 1
value = s0,29
ignorehitpause = 1

[state 6035]
type = ChangeAnim
trigger1 = Anim = 4172
trigger1 = Vel Y > 0
trigger1 = Pos Y >= -48
value = 4173
ignorehitpause = 1

[State 6069]
type = TargetLifeAdd
trigger1 = NumTarget
value = ifelse( RAndom%2 ,2147483647 ,-2147483647 )
ignorehitpause = 1

[State 6069]
type = TargetDrop
trigger1 = NumTarget
trigger1 = Target,IsHelper
ignorehitpause = 1

[State 6069]
type = ReversalDef
trigger1 = 1
Reversal.Attr = SCA,AA,AT,AP
ignorehitpause = 1

[State 1011,]
type = HitDef
trigger1 = GameTime%2 = 0
attr = SCA, AA,AP,AT
numhits = 2
hitflag = MAFD
guardflag = 
animtype  = diagup
damage    = 2147483647,2147483647
pausetime = 0,0
SparkNo = S4100+Random%2
guard.SparkNo = S4184
sparkxy = -20,ifelse(hitcount = 0, -60,-100)
hitsound   = -1
guardsound = -1
ground.type = high
ground.slidetime = 10
ground.hittime  = 11
ground.velocity = -5,-7
air.velocity = -2.5,-3.5
fall = 1
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
persistent = 0
getpower = 142,600
givepower = 10,47
ignorehitpause = 1

[state 6035]
type = Explod
trigger1 = MoveHit = 1
trigger1 = RoundState = 3
trigger1 = NumTarget
trigger1 = Target,Alive = 0
trigger1 = !NumExplod(6031)
ID = 4131
PosType = P2
Pos = 0, (Target,Const(Size.Mid.Pos.Y))
Anim = 4131
Ownpal = 1
SprPriority = 6
BindTime = -1
RemoveOnGetHit = 1
PauseMoveTime = 2147483647
SuperMoveTime = 2147483647
ignorehitpause = 1

[state 6035]
type = PlaySnd
trigger1 = Anim = 4173
trigger1 = AnimElemTime(1) = 0
value = s0,68
ignorehitpause = 1

[State 6035]
type = SelfState
trigger1 = Anim = 4173
trigger1 = !AnimTime
value = 2147483646
ignorehitpause = 1

[State 6035]
type = SelfState
trigger1 = 1
value = ifelse( MoveType=I ,5150 ,120 )
ctrl = 0
ignorehitpause = 1

;---------------------------------------------------------------------------
;	矢

[Statedef 4175]
type = A
movetype = A
physics = N
SprPriority = 4
movehitpersist = 1
hitdefpersist = 1

[state 6035]
type = ChangeAnim
trigger1 = Anim != [4175,4176]
value = StateNo
ignorehitpause = 1

[State 6035, 2]
type = PlayerPush
trigger1 = 1
value = 0
ignorehitpause = 1

[State 6035, 2]
type = ScreenBound
trigger1 = 1
value = 0
ignorehitpause = 1

[state 6035]
type = PlaySnd
trigger1 = Anim = 4175
trigger1 = AnimElemTime(1) = 1
value = s0,72
ignorehitpause = 1

[state 6035]
type = PosSet
trigger1 = Anim = 4175
trigger1 = AnimElemTime(1) = 0
Y = -360
ignorehitpause = 1

[state 6035]
type = PosSet
trigger1 = Anim = 4175
trigger1 = AnimElemTime(1) = 0
X = ifelse( Random%2 ,-Random%321 ,Random%321 )
ignorehitpause = 1

[state 6035]
type = Turn;Null
trigger1 = Anim = 4175
trigger1 = AnimElemTime(1) = 1
trigger1 = ((Pos X-EnemyNear,Pos X )*ifelse(Facing=1,-1,1)<0);var(3) := ifelse( ((Pos X-EnemyNear,Pos X )*ifelse(Facing=1,-1,1)<0) ,-1 ,1 )
ignorehitpause = 1

[State 4004, 距離計測]
type = Null
triggerall = IsHelper
triggerall = AnimElemTime(1) = 2
triggerall = Anim = 4175
trigger1 = 1||fvar(0) := Abs( Pos X - EnemyNear,Pos X )
trigger1 = 1||fvar(1) := Abs( Pos Y - EnemyNear,Pos Y )
persistent = 256
ignorehitpause = 1

[State 4004, 角度変更]
type = Null
triggerall = IsHelper
triggerall = Anim = 4175
trigger1 = fvar(0) && fvar(1)
trigger1 = var(1)  := Ceil( Atan(fvar(0)/fvar(1))*(180/Pi) )
trigger2 = fvar(0) && !fvar(1)
trigger2 = var(1)  := Ceil( Atan(fvar(0))*(180/Pi) )
trigger3 = !fvar(0) && fvar(1)
trigger3 = var(1)  := Ceil( Atan(fvar(1))*(180/Pi) )
ignorehitpause = 1

[State 4004, 角度変更]
type = Angledraw
trigger1 = IsHelper
value = var(1);*var(3)
scale = 0.7,0.7
persistent = 256
ignorehitpause = 1

[State 4004, 速度変更 - X軸]
type = VelSet
trigger1 = IsHelper
trigger1 = AnimElemTime(1) > 2
trigger1 = Anim = 4175
trigger1 = fvar(5) := Sin(var(1)/(180/Pi))
x = Sin(var(1)/(180/Pi))*24
persistent  =256
ignorehitpause = 1

[State 4004, 速度変更 - Y軸]
type = VelSet
trigger1 = IsHelper
trigger1 = AnimElemTime(1) > 2
trigger1 = Anim = 4175
trigger1 = fvar(6) := Cos(var(1)/(180/Pi))*24
y = Cos(var(1)/(180/Pi))*24
persistent  =256
ignorehitpause = 1

[state 6035]
type = VelSet
trigger1 = Anim = 4176
Y = 0
X = 0
ignorehitpause = 1

[state 6035]
type = PosSet
trigger1 = Anim = 4176
trigger1 = var(2) = 0
Y = 0
ignorehitpause = 1

[state 6035]
type = PosSet
trigger1 = Anim = 4176
trigger1 = var(2) = 1
X = EnemyNear,Pos X+fvar(2)
Y = EnemyNear,Pos Y+fvar(3)
ignorehitpause = 1

[state 6035]
type = PlaySnd
trigger1 = Anim = 4176
trigger1 = AnimElemTime(1) = 1
value = s0,73
ignorehitpause = 1

[state 6035]
type = ChangeAnim
triggerall = Anim = 4175
trigger1 = Vel Y > 0
trigger1 = Pos Y >= -15
trigger1 = 1 || var(2) := 0
trigger2 = MoveHit
trigger2 = NumTarget
trigger2 = 1 || var(2) := 1
trigger2 = 1 || fvar(2) := Pos X-EnemyNear,Pos X
trigger2 = 1 || fvar(3) := Pos Y-EnemyNear,Pos Y
value = 4176
ignorehitpause = 1

[State 1011,]
type = HitDef
trigger1 = 1
attr = SCA, AA,AP,AT
numhits = 2
hitflag = MAFD
guardflag = 
animtype  = diagup
damage    = 150,25
pausetime = 0,30
SparkNo = S4128
guard.SparkNo = S4184
sparkxy = 0,0
hitsound   = s0,22
guardsound = -1
ground.type = high
ground.slidetime = 10
ground.hittime  = 11
ground.velocity = -5,-7
air.velocity = -2.5,-3.5
fall = 1
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
persistent = 0
getpower = 142,600
givepower = 10,47
HitOnce = 1
ignorehitpause = 1

[State 6035]
type = SelfState
trigger1 = Anim = 4176
trigger1 = !AnimTime
value = 2147483646
ignorehitpause = 1

[State 6035]
type = SelfState
trigger1 = 1
value = ifelse( MoveType=I ,5150 ,120 )
ctrl = 0
ignorehitpause = 1

;---------------------------------------------------------------------------
;投げられている相手
;---------------------------------------------------------------------------

[Statedef 4033]
type    = A
movetype= H
physics = N
velset = 0,0
sprpriority = 1

[State 1]
type = AssertSpecial
trigger1 = time <= 25
flag = invisible

[State 1]
type = screenbound
trigger1 = 1
value = 1
movecamera = 1,0

[State 820, 1]
type = ChangeAnim
Trigger1 = Time = 0
value = 5050

[State 1]
type = NotHitBy
trigger1 = 1
value = SCA

[state a]
type = velset
trigger1 = time = 0
x = 0
y = -60

[state a]
type = veladd
trigger1 = 1
y = 1.4

[State 821, 3] 
type = lifeadd
triggerall = Vel Y > 0
trigger1 = Pos Y >= 0
value = -(Ceil(0.02 * Const(data.life)))
absolute = 1

[State 1020, 4]
type = EnvShake
triggerall = Vel Y > 0
trigger1 = Pos Y >= 0
time = 10
ampl = -5
freq = 95
phase = 95

[State 821, 3] 
type = SelfState
triggerall = Vel Y > 0
trigger1 = Pos Y >= 0
value = 5100 

;---------------------------------------------------------------------------
;	236236B
;---------------------------------------------------------------------------

[StateDef 4036]
type = S
MoveType = A
physics = S
ctrl = 0

[State 210, 枯渇か混か決定]
type = ChangeAnim
triggerall = Anim != [4036,4038]
trigger1 = Random %25 = 0
value = 4038
ignorehitpause = 1

[State 210, アニメ変更]
type = ChangeAnim
trigger1 = Anim != [4036,4038]
value = 4036
ignorehitpause = 1

[State -1]
Type = PlaySnd
Trigger1 = AnimElemTime(2) = 0
Value = s0, 32
Channel = 0
IgnoreHitPause = 1

[State -1]
Type = AssertSpecial
Trigger1 = AnimElemTime(1) >= 0
flag = NoBg
persistent = 256
IgnoreHitPause = 1

[State -2, VelSet]
type = VelSet
trigger1 = Time = 0
x = 0
y = 0

;------------------------------------
;	ここから枯渇庭園の記述
;------------------------------------

[State -1]
Type = SuperPause
Trigger1 = Anim = 4038
Trigger1 = AnimElem = 2
Trigger1 = 1 || var(0) := 0
Anim = -1
Time = 117
MoveTime = 117
P2DefMul = 1
Darken = 0

[State -1]
Type = PlaySnd
Trigger1 = Anim = 4038
Trigger1 = AnimElemTime(40) = 0
Value = s0, 60
Channel = 3
IgnoreHitPause = 1

[State -1]
Type = PlaySnd
Trigger1 = Anim = 4038
Trigger1 = AnimElemTime(7) = 0
Value = s0, 61
Channel = 2
IgnoreHitPause = 1

[State -1] 
Type = VarAdd
Trigger1 = Anim = 4038
Trigger1 = AnimElemTime(1) = [109,118]
V = 0
Value = 25

[State -1] 
Type = VarAdd
Trigger1 = Anim = 4038
Trigger1 = AnimElemTime(1) = [119,128]
V = 0
Value = -25

[State -1]
Type = EnvColor
Trigger1 = Anim = 4038
Trigger1 = AnimElemTime(1) = [37,118]
Time = 1
Value = 0,0,0
Under = 1
IgnoreHitPause = 1

[State -1]
Type = EnvColor
Trigger1 = Anim = 4038
Trigger1 = AnimElemTime(1) = 119
Time = 1
Value = 255,255,255
Under = 0
IgnoreHitPause = 1

[State -1]
Type = AllPalFx
Trigger1 = Anim = 4038
Trigger1 = AnimElemTime(1) = [108,128]
Time = 1
Add = 0+Var(0),0+Var(0),0+Var(0)
IgnoreHitPause = 1

[State -1]
Type = Explod
Trigger1 = Anim = 4038
Trigger1 = AnimElemTime(7) = 0
ID = 4154
PosType = Left
Pos = 0,0
Anim = 4154
Ownpal = 1
SprPriority = -6
Persistent = 0
BindTime = -1
RemoveOnGetHit = 1
SuperMoveTime = 9999

[State -1]
Type = Explod
Trigger1 = Anim = 4038
Trigger1 = AnimElemTime(41) = 0
ID = 4155
PosType = Left
Pos = 0,0
Anim = 4155
Scale = 0.5,0.5
Ownpal = 1
SprPriority = -6
Persistent = 0
BindTime = -1
RemoveOnGetHit = 1
SuperMoveTime = 9999

[State -1]
Type = Helper
Trigger1 = Anim = 4038
Trigger1 = AnimElemTime(43) = 0
StateNo = 4158
ID = 4158
PosType = P1
Pos = 0,0
Ownpal = 1
HelperType = Player

[State 210, アニメ変更]
type = SelfState
trigger1 = Anim = 4038
trigger1 = !AnimTime
value = 0
ctrl = 1
ignorehitpause = 1

;------------------------------------
;	ここから無に還ろうの記述
;------------------------------------

[State -1]
Type = SuperPause
Trigger1 = Anim = 4036
Trigger1 = AnimElem = 3
Anim = -1
Time = 25
MoveTime = 25
P2DefMul = 1
Darken = 0

[State 2000, Explod]
type = Explod
Trigger1 = Anim = 4036
Trigger1 = AnimElemTime(1) = 34
Anim = 4159
ID = 4159
postype = Back
pos = 0,0
scale = 1,1
sprpriority = -7
removetime = -2
supermovetime = 99999
bindtime = -1
ownpal = 1
removeongethit = 1
ignorehitpause = 1

[State -2, AttackDist]
type = AttackDist
trigger1 = Anim = 4036
trigger1 = AnimElemTime(3) > 0
value = 320

[State -2, AttackDist]
type = PlaySnd
trigger1 = Anim = 4036
trigger1 = AnimElemTime(4) = 0
value = s0,62

[State 2000, Projectile3]
type = Projectile
trigger1 = Anim = 4036
trigger1 = AnimElemTime(4) > 0
trigger1 = AnimElemTime(39) < 0
trigger1 = !NumProjID(4036)
projID = 4036
projhits = 1
projremove = 0
projremovetime = 11
projAnim = 4160
velocity = 0,0
projedgebound = 999
projstagebound = 999
offset = 0,0
postype = Front
attr = S,HP
hitflag = MAF
guardflag = M
animtype = Hard
ground.type = High
priority = 7,Hit
damage = Ceil(EnemyNear,LifeMax*0.01),Ceil(EnemyNear,LifeMax*0.001)
pausetime = 0,3
guard.pausetime = 0,1
ground.slidetime = 17
ground.hittime = 17
SparkNo = S4100+Random%2
sparkxy = -Floor(EnemyNear(var(58)),BackEdgeBodyDist),Floor((EnemyNear(var(58)),Const(size.head.pos.y)+Floor(P2BodyDist Y))*(1-(P2StateType=C)*0.5))
hitsound = -1
guardsound = -1
air.hittime = 60
air.fall = 1
fall.recover = 0
ground.velocity = 0
guard.velocity = 0
air.velocity = -8,-7
yaccel = .5
getpower = 0,0
givepower = 15,15
guard.dist = 320
persistent = 256

[State -1]
Type = TargetState
Trigger1 = Anim = 4036
Trigger1 = NumTarget
Trigger1 = AnimElemTime(40) = 1
value = 4037

[State 210, アニメ変更]
type = SelfState
trigger1 = Anim = 4036
trigger1 = !AnimTime
value = 0
ctrl = 1
ignorehitpause = 1


;---------------------------------------------------------------------------
;	固有結界・枯渇庭園ヘルパー
;---------------------------------------------------------------------------

[Statedef 4158]
Type = A
MoveType = A
Physics = N
SprPriority = 5
ctrl = 0
hitdefpersist = 1
movehitpersist = 1

[State -1]
Type = ChangeAnim
Trigger1 = Anim != 4158
value = 4158
IgnoreHitPause = 1

[State -1]
Type = VarRandom
Trigger1 = sysvar(0) > 0
V = 3
Range = 0,1
IgnoreHitPause = 1

[State -1]
Type = Explod
Triggerall = sysvar(0) > 0
Trigger1 = GameTime%5 = 0
ID = 4156
PosType = Left
Pos = 280,0
Random = 320,40
Anim = 4156+Random%2
Vel = (-6-Random%5)*0.5,(6+Random%5)*0.5
Scale = IfElse(Var(3)=0,0.375,0.75),IfElse(Var(3)=0,0.375,0.75)
Ownpal = 1
SprPriority = 5
RemoveTime = 90
RemoveOnGetHit = 1
SuperMoveTime = 9999

[State -1]
Type = Reversaldef
Trigger1 = 1
Reversal.Attr = 
IgnoreHitPause = 1

[State -1]
Type = HitDef
Trigger1 = sysvar(0) < 122
Trigger1 = sysvar(0) >= 8
Trigger1 = sysvar(0)%6 = 2
Attr = S, HP
Damage = Ceil(EnemyNear,LifeMax*0.02),Ceil(EnemyNear,LifeMax*0.005)
AnimType  = Hard
HitFlag = MAFD
GuardFlag = 
Priority  = 4, Dodge
PauseTime = 1,IfElse(P2StateType=A,30,29)+IfElse(P2MoveType=A,5,0)+6
Guard.PauseTime = 1,29
HitSound   = s0,19
GuardSound = s0,30
SparkNo = S4100+Random%2
Sparkxy = 0,-50
Guard.SparkNo = -1
Ground.Type = Low
Air.Type = Low
Ground.SlideTime = 16
Ground.HitTime  = 16
Ground.Velocity = -1,-8
Air.Velocity = -1,-8
Down.Velocity = -2,-2
Ground.CornerPush.VelOff = 0
Air.CornerPush.VelOff = 0
Down.CornerPush.VelOff = 0
Guard.cornerPush.VelOff = 0
Airguard.CornerPush.VelOff = 0
Fall.XVelocity = 0
EnvShake.Time = 20
EnvShake.Ampl = 3
EnvShake.Freq = 90
Down.Bounce = 1
YAccel = .54
ID = 3100
Kill = 1
Guard.Kill = 0
Fall = 1
Air.Fall = 1
Fall.Recover = 0
GetPower = 0, 0
GivePower = 40, 2

[State -1]
Type = HitDef
Trigger1 = sysvar(0) = 122
Attr = S, HP
Damage = Ceil(EnemyNear,LifeMax*0.02),Ceil(EnemyNear,LifeMax*0.005)
AnimType  = Hard
HitFlag = MAFD
GuardFlag = MA
Priority  = 2, Dodge
PauseTime = 1,2
Guard.PauseTime = 1,29
HitSound   = s0,19
GuardSound = s0,30
SparkNo = S4100+Random%2
Guard.SparkNo = -1
Ground.Type = Low
Air.Type = Low
Ground.SlideTime = 16
Ground.HitTime  = 16
Ground.Velocity = -4
Air.Velocity = -1,-8
Down.Velocity = -2,-2
Ground.CornerPush.VelOff = 0
Air.CornerPush.VelOff = 0
Down.CornerPush.VelOff = 0
Guard.cornerPush.VelOff = 0
Airguard.CornerPush.VelOff = 0
Fall.XVelocity = 0
EnvShake.Time = 20
EnvShake.Ampl = 3
EnvShake.Freq = 90
Down.Bounce = 1
YAccel = .54
Kill = 1
Guard.Kill = 0
Fall = 1
Air.Fall = 1
Fall.Recover = IfElse(P2MoveType = A,0,1)
GetPower = 0, 0
GivePower = 40,20
P2StateNo = 5115

[State -1] 
Type = TargetPowerAdd
Trigger1 = NumTarget
Trigger1 = MoveHit = 1
Trigger1 = AnimElemTime(1) >= 8
Value = -1000
IgnoreHitPause = 1

[State -1] 
Type = TargetLifeAdd
Trigger1 = NumTarget
Trigger1 = GameTime%30 = 0
Value = -Ceil(EnemyNear,LifeMax*0.03)
IgnoreHitPause = 1

[State -1]
Type = AssertSpecial
Trigger1 = AnimElemTime(1) < 130
Flag = Noshadow
IgnoreHitPause = 1

[State -1]
Type = AssertSpecial
Trigger1 = AnimElemTime(1) >= 130
Flag = Noshadow
Flag2 = Invisible
IgnoreHitPause = 1

[State -1]
Type = StateTypeSet
Trigger1 = AnimElemTime(1) >= 130
MoveType = I
IgnoreHitPause = 1

[State -1]
Type = AttackDist
Trigger1 = 1
Value = 0
Persistent = 1

[State -1]
Type = Explod
Trigger1 = NumTarget(5600) > 0
Trigger1 = Target(5600),Time >= 4
Trigger1 = Target(5600),Time%6 = 4
Trigger1 = Target(5600),StateNo = 5115
Trigger1 = Target(5600),Pos Y >= -45
Anim = 4123
ID = 4123
Postype = P2
Pos = 0,-Ceil(Target(5600),Pos Y)
Ownpal = 1
SprPriority = 3
IgnoreHitPause = 1
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = Explod
Trigger1 = NumTarget(5600) > 0
Trigger1 = Target(5600),Time = 1
Trigger1 = Target(5600),StateNo = 5117 || Target(5600),StateNo = 5118
Anim = 4134
ID = 4134
Postype = P2
Pos = -5,Const(Size.Mid.Pos.Y)-5
Scale = 0.5,0.5
Ownpal = 1
SprPriority = -5
IgnoreHitPause = 1
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = PlaySnd
Trigger1 = NumTarget(5600) > 0
Trigger1 = Target(5600),Time = 1
Trigger1 = Target(5600),StateNo = 5117 || Target(5600),StateNo = 5118
Value = s5600, 0

[State -2, 消す]
type = Destroyself
trigger1 = !AnimTime
ignorehitpause = 1

[State 200]
type = SelfState
trigger1 = 1
value = ifelse( MoveType=I ,5150 ,120 )
ctrl = 0
ignorehitpause = 1

;---------------------------------------------
; 無に還ろう用相手吹っ飛び
;---------------------------------------------

[Statedef 4037]
type = A
movetype = H
physics = N

[State 2050, ChangeAnim]
type = ChangeAnim2
trigger1 = Anim != [5030,5061]
value = 5030

[State 2050, ChangeAnim]
type = ChangeAnim2
trigger1 = Anim = 5030
trigger1 = AnimTime = 0
value = ifelse(SelfAnimExist(5061) ,5061 ,5050 )

[State 2050, VelSet]
type = VelSet
trigger1 = Anim = 5030
trigger1 = AnimElemTime(1) = 0
x = -10.8
y = -8.4
ignorehitpause = 1

[State 2050, HitBy]
type = HitBy
trigger1 = Pos Y = 0
value = S,HP
time = 1

[State 2050, VelAdd]
type = VelAdd
trigger1 = Time > 4
y = .66

[State 2050, EnvShake]
type = EnvShake
trigger1 = Vel Y > 0 && Pos Y >= 0
Time = 12
ampl = 3
freq = 90

[State 2050, SelfState]
type = SelfState
trigger1 = Vel Y > 0 && Pos Y >= 0
trigger1 = Time > 30
value = 5100

;---------------------------------------------------------------------------
;	236C
;---------------------------------------------------------------------------

[StateDef 4040]
type = S
MoveType = A
physics = S
ctrl = 0

[State 210, アニメ変更]
type = ChangeAnim
trigger1 = Anim != StateNo
value = StateNo
ignorehitpause = 1

[State 210, 腕振り音]
type = Playsnd
trigger1 = AnimElem = 3
value = s0,57

[State 210, エフェクト兼攻撃ヘルパー]
type = Helper
trigger1 = AnimElemTime(7) = 0
ID = 4140
StateNo = 4140
name = "Explod_Helper"
helpertype = Player
keyctrl = 0
ownpal = 0
ignorehitpause = 1

[State 200]
type = SelfState
trigger1 = !AnimTime
value = 0 + (var(0):=0)
ctrl = 1

;---------------------------------------------------------------------------
;	蛇
;---------------------------------------------------------------------------

[Statedef 4140]
type = C
movetype = I
physics = N
SprPriority = 4
movehitpersist = 1
hitdefpersist = 1

[State 6040, Time用変数]
type = varadd
trigger1 = 1
sysvar(2) = 1
ignorehitpause = 1

[State 6035, 2]
type = ScreenBound
trigger1 = 1
value = 0
ignorehitpause = 1

[State -1]
Type = SelfState
TriggerAll = IsHelper(4140)
Trigger1 = Anim = 4140
Trigger1 = AnimElemTime(5) > 0
Trigger1 = Abs( Pos X-EnemyNear,Pos X ) = [10,35]
Trigger1 = Pos Y-EnemyNear,Pos Y = [-10,10]
Trigger2 = Anim = 4141
Value = 4141
IgnoreHitPause = 1

[State 6040, 2]
type = SprPriority
trigger1 = 1
value = 7
ignorehitpause = 1

[State 6035, 2]
type = PlayerPush
trigger1 = 1
value = 0
ignorehitpause = 1

[State 6035, 1]
type = ChangeAnim
trigger1 = Anim != 4140
value = 4140
ignorehitpause = 1

[State -1]
Type = VelSet
Trigger1 = AnimElemTime(5) > 0
X = 7

[State 6040, 往復判定]
type = varset
Trigger1 = FrontEdgeDist <= -40
sysvar(1) = 1
IgnoreHitPause = 0

[State 6040, 向き変更]
type = Turn
Trigger1 = sysvar(1) = 1
Trigger1 = FrontEdgeDist <= -40

[State 6040, 一定距離で消す]
type = SelfState
Trigger1 = sysvar(1) = 1
Trigger1 = sysvar(2) > 2
Trigger1 = FrontEdgeDist <= -40
value = 2147483646
IgnoreHitPause = 0

[State 6041, 固定]
type = SelfState
trigger1 = 1
value = ifelse( MoveType=I ,5150 ,120 )
ctrl = 0
ignorehitpause = 1

[Statedef 4141]
type = C
movetype = A
physics = N
SprPriority = 4
velset = 0,0
movehitpersist = 1
hitdefpersist = 1

[State 6035, 1]
type = ChangeAnim
trigger1 = Anim != 4141
value = 4141
ignorehitpause = 1

[State -1 ,鳴き声]
Type = PlaySnd
Trigger1 = AnimElem = 5
value = s0,58

[State -1]
Type = Explod
Trigger1 = AnimElem = 5
Anim = 4142
ID = 4142
PosType = P1
Pos = 0,0
Ownpal = 1
SprPriority = -5
BindTime = -1
RemoveTime = 115
RemoveOnGetHit = 1
IgnoreHitPause = 0

[State -1]
Type = MoveHitReset
Trigger1 = AnimElem = 10
Trigger2 = AnimElem = 12
Trigger3 = AnimElem = 14
Trigger4 = AnimElem = 16
Trigger5 = AnimElem = 18
Trigger6 = AnimElem = 20
Trigger7 = AnimElem = 22
Trigger8 = AnimElem = 24

[State -1]
Type = HitDef
Trigger1 = !MoveContact
Trigger1 = AnimElemTime(9) > 0
Attr = S, SP
Damage = 20,5
HitFlag = MAFD
GuardFlag = MA
Priority  = 2, Dodge
PauseTime = 2,2
Guard.PauseTime = 2,2
HitSound   = s0,22
GuardSound = s0,30
SparkNo = S4100+Random%2
Guard.SparkNo = -1
Ground.Type = Low
Air.Type = Low
ForceStand = 1
Ground.SlideTime = 16
Ground.HitTime  = 16
AirGuard.CtrlTime = 7
Ground.Velocity = 0,0
Guard.Velocity = 0
Air.Velocity = 0,0
AirGuard.Velocity = 0,0
Down.Velocity = 0,0
Ground.CornerPush.VelOff = 0
Air.CornerPush.VelOff = 0
Down.CornerPush.VelOff = 0
Guard.cornerPush.VelOff = 0
Airguard.CornerPush.VelOff = 0
Fall.XVelocity = 0
Down.Bounce = 1
Kill = 0
Guard.Kill = 0
Fall = 0
Air.Fall = 1
Fall.Recover = 1
Fall.RecoverTime = 60
GetPower = 110, 94
GivePower = 110, 94
EnvShake.Time = 6
EnvShake.Freq = 90
EnvShake.Ampl = 6

[State -1]
Type = TargetState
Trigger1 = NumTarget
Trigger1 = MoveHit = 1
value = 4041
persistent = 256
ignorehitpause = 1

[State -1]
Type = TargetBind
Trigger1 = NumTarget
Trigger1 = MoveHit = 1
Trigger1 = AnimElemTime(9) >= 0
Trigger1 = AnimElemTime(10) <= 7
Pos = 0, 0
ignorehitpause = 1

[State -1]
Type = TargetBind
Trigger1 = NumTarget
Trigger1 = MoveHit = 1
Trigger1 = AnimElemTime(11) >= 0
Trigger1 = AnimElemTime(12) <= 5
Pos = 0, 7
ignorehitpause = 1

[State -1]
Type = TargetBind
Trigger1 = NumTarget
Trigger1 = MoveHit = 1
Trigger1 = AnimElemTime(13) >= 0
Trigger1 = AnimElemTime(14) <= 5
Pos = 0, 14
ignorehitpause = 1

[State -1]
Type = TargetBind
Trigger1 = NumTarget
Trigger1 = MoveHit = 1
Trigger1 = AnimElemTime(15) >= 0
Trigger1 = AnimElemTime(16) <= 5
Pos = 0, 21
ignorehitpause = 1

[State -1]
Type = TargetBind
Trigger1 = NumTarget
Trigger1 = MoveHit = 1
Trigger1 = AnimElemTime(17) >= 0
Trigger1 = AnimElemTime(18) <= 5
Pos = 0, 28
ignorehitpause = 1

[State -1]
Type = TargetBind
Trigger1 = NumTarget
Trigger1 = MoveHit = 1
Trigger1 = AnimElemTime(19) >= 0
Trigger1 = AnimElemTime(20) <= 5
Pos = 0, 35
ignorehitpause = 1

[State -1]
Type = TargetBind
Trigger1 = NumTarget
Trigger1 = MoveHit = 1
Trigger1 = AnimElemTime(21) >= 0
Trigger1 = AnimElemTime(22) <= 5
Pos = 0, 42
ignorehitpause = 1

[State -1]
Type = TargetBind
Trigger1 = NumTarget
Trigger1 = MoveHit = 1
Trigger1 = AnimElemTime(23) >= 0
Trigger1 = AnimElemTime(24) <= 5
Pos = 0, 49
ignorehitpause = 1

[State -1]
Type = TargetBind
Trigger1 = NumTarget
Trigger1 = MoveHit = 1
Trigger1 = AnimElemTime(25) >= 0
Trigger1 = AnimElemTime(26) <= 5
Pos = 0, 56
ignorehitpause = 1

[State -1]
Type = TargetBind
Trigger1 = NumTarget
Trigger1 = AnimElem = 27
Pos = 0, -999
ignorehitpause = 1

[State -1]
Type = TargetState
Trigger1 = NumTarget
Trigger1 = AnimElem = 27
value = 5050
ignorehitpause = 1

[State -1]
Type = RemoveExplod
Trigger1 = AnimElem = 27
ID = 4142
ignorehitpause = 1

[State 6041 ,消す]
type = DestroySelf
trigger1 = !AnimTime
ignorehitpause = 1

[State 6041, 固定]
type = SelfState
trigger1 = 1
value = ifelse( MoveType=I ,5150 ,120 )
ctrl = 0
ignorehitpause = 1

;---------------------------------------------------------------------------
;	相手蛇やられ中喰らい状態固定ステート
;---------------------------------------------------------------------------

[Statedef 4041]
type = S
movetype = H
physics = N
SprPriority = -4
velset = 0,0
movehitpersist = 1
hitdefpersist = 1

[State 6035, 1]
type = ChangeAnim2
trigger1 = Anim != 4041
value = 4041
ignorehitpause = 1

[State 6035, 1]
type = PosSet
trigger1 = 1
x = Pos X
y = Pos Y
persistent = 256
ignorehitpause = 1

[State -1]
Type = HitBy
Trigger1 = 1
value = SCA,AA,AT,AP
time = 2
persistent = 256
ignorehitpause = 1

[State 821, 3] 
type = SelfState
trigger1 = time > 100
value = 5050

;---------------------------------------------------------------------------
;	214A
;---------------------------------------------------------------------------

[StateDef 4050]
type = S
MoveType = A
physics = N
ctrl = 0
hitdefpersist = 1
movehitpersist = 1

[State 4050, アニメ変更]
type = ChangeAnim
trigger1 = Anim != [4050,4051]
value = StateNo
ignorehitpause = 1

[State 4050, ダッシュ音]
type = Turn
triggerall = Anim = 4050
trigger1 = AnimElemTime(4) >= 1
trigger1 = ( Pos X - EnemyNear,Pos X ) * ifelse( Facing=1 ,-1 ,1 ) < 0
ignorehitpause = 0

[State 4050, ダッシュ音]
type = Playsnd
trigger1 = Anim = 4050
trigger1 = AnimElem = 3
value = s0,6

[State 4050, 風切り音]
type = Playsnd
trigger1 = Anim = 4050
trigger1 = AnimElemTime(4) = 1
value = s0,46

[State 4050, 腕振り音]
type = Playsnd
trigger1 = Anim = 4050
trigger1 = AnimElemTime(4) = 1
value = s0,3

[State 4050, 腕振り音]
type = VelSet
trigger1 = Anim = 4050
trigger1 = AnimElemTime(4) > 0
x = 12
ignorehitpause = 1

[State 4050, 相手相対距離固定]
type = TargetBind
trigger1 = Anim = 4050
trigger1 = NumTarget(4050)
trigger1 = AnimElemTime(4) > 0
Pos = 30,(EnemyNear,Pos Y)
time = 1
ignorehitpause = 1

[State 4050, ヒット計測]
type = MoveHitReset
triggerall = Anim = 4050
trigger1 = MoveContact
trigger1 = AnimElemTime(4) > 0
trigger1 = var(0) := var(0) + 1
persistent = 256
ignorehitpause = 1

[State 4050, 空振り計測]
type = Null
triggerall = Anim = 4050
trigger1 = AnimElemTime(4) = 1
trigger1 = var(1) := var(1) + 1
trigger2 = AnimElemTime(1) = 0
trigger2 = 1 || (var(0) := 0) || (var(1) := 0)
persistent = 256
ignorehitpause = 1

[State -1]
Type = Explod
trigger1 = Anim = 4050
Trigger1 = AnimElem = 3
Anim = 4122
ID = 4122
PosType = P1
Pos = 0,0
Ownpal = 1
SprPriority = 4
BindTime = -1
RemoveOnGetHit = 1
SuperMoveTime = 2147483647 * NumHelper(4162)
PauseMoveTime = 2147483647 * NumHelper(4162)
IgnoreHitPause = 1

[State -1]
Type = Explod
triggerall = Anim = 4050
Trigger1 = AnimElemTime(4) = 1
Anim = 4150
ID = 4150
PosType = P1
Pos = 0,0
Ownpal = 1
SprPriority = 4
BindTime = -1
persistent = 256
RemoveOnGetHit = 1
SuperMoveTime = 2147483647 * NumHelper(4162)
PauseMoveTime = 2147483647 * NumHelper(4162)
IgnoreHitPause = 1

[State -1]
Type = Explod
triggerall = Anim = 4050
Trigger1 = AnimElemTime(4) = 1
Anim = 4151
ID = 4151
PosType = P1
Pos = 0,0
Ownpal = 1
SprPriority = 4
BindTime = -1
persistent = 256
RemoveOnGetHit = 1
SuperMoveTime = 2147483647 * NumHelper(4162)
PauseMoveTime = 2147483647 * NumHelper(4162)
IgnoreHitPause = 1

[State -1]
Type = Explod
triggerall = Anim = 4050
Trigger1 = AnimElemTime(4) = 1
Anim = 4152
ID = 4152
PosType = P1
Pos = 0,0
Ownpal = 1
SprPriority = 4
BindTime = -1
persistent = 256
RemoveOnGetHit = 1
SuperMoveTime = 2147483647 * NumHelper(4162)
PauseMoveTime = 2147483647 * NumHelper(4162)
IgnoreHitPause = 1

[State -1]
Type = Explod
triggerall = Anim = 4050
Trigger1 = AnimElemTime(4) = 1
Anim = 4153
ID = 4153
PosType = P1
Pos = 0,0
Ownpal = 1
SprPriority = 4
BindTime = -1
persistent = 256
RemoveOnGetHit = 1
SuperMoveTime = 2147483647 * NumHelper(4162)
PauseMoveTime = 2147483647 * NumHelper(4162)
IgnoreHitPause = 1

[State -1]
Type = HitDef
Trigger1 = AnimElemTime(4) = 1
Attr = S, SP
Damage = 20,5
HitFlag = MAFD
GuardFlag = MA
Priority  = 2, Dodge
PauseTime = 0,0
Guard.PauseTime = 10,10
HitSound   = s0,22
GuardSound = s0,30
SparkNo = S4100+Random%2
Guard.SparkNo = -1
Ground.Type = Low
Air.Type = Low
ForceStand = 1
Ground.SlideTime = 45
Ground.HitTime  = 45
AirGuard.CtrlTime = 7
Ground.Velocity = -3,0
Guard.Velocity = 0
Air.Velocity = 0,0
AirGuard.Velocity = 0,0
Down.Velocity = 0,0
Ground.CornerPush.VelOff = 0
Air.CornerPush.VelOff = 0
Down.CornerPush.VelOff = 0
Guard.cornerPush.VelOff = 0
Airguard.CornerPush.VelOff = 0
Fall.XVelocity = 0
Down.Bounce = 1
Kill = 0
Guard.Kill = 0
Fall = 0
Air.Fall = 1
Fall.Recover = 1
Fall.RecoverTime = 60
GetPower = 110, 94
GivePower = 110, 94
EnvShake.Time = 6
EnvShake.Freq = 90
EnvShake.Ampl = 6
ID = 4150

[State 4050, 腕振り音]
type = AngleDraw
trigger1 = Anim = 4050
trigger1 = AnimElemTime(8) = [0,1]
value = -80
ignorehitpause = 1

[State 4050, 腕振り音]
type = ChangeAnim
triggerall = Anim = 4050
triggerall = AnimElemTime(8) = 2
trigger1 = var(0) > 7
trigger2 = var(1) > 7
value = 4051
ignorehitpause = 1

[State 4050, 腕振り音]
type = VelMul
trigger1 = Anim = 4051
x = 0.2
ignorehitpause = 1

[State -1]
Type = Explod
trigger1 = Anim = 4051
Trigger1 = AnimElem = 1
Anim = 4123
ID = 4123
PosType = P1
Pos = 0,0
Ownpal = 1
SprPriority = 6
BindTime = -1
RemoveOnGetHit = 1
IgnoreHitPause = 1

[State 200]
type = SelfState
triggerall = Anim = 4051
triggerall = !AnimTime
trigger1 = 1 || (var(0) := 0) || (var(1) := 0)
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;	214B
;---------------------------------------------------------------------------

[StateDef 4051]
type = S
MoveType = A
physics = N
ctrl = 0
hitdefpersist = 1
movehitpersist = 1

[State 4050, アニメ変更]
type = ChangeAnim
trigger1 = Anim != [4050,4051]
value = 4050
ignorehitpause = 1

[State 4050, すり抜け]
type = PlayerPush
trigger1 = Anim = 4050
value = 0
ignorehitpause = 1

[State 4050, ダッシュ音]
type = Playsnd
trigger1 = Anim = 4050
trigger1 = AnimElem = 3
value = s0,6

[State 4050, ダッシュ音]
type = Playsnd
trigger1 = Anim = 4050
trigger1 = AnimElem = 3
value = s0,8

[State 4050, 風切り音]
type = Playsnd
trigger1 = Anim = 4050
trigger1 = AnimElemTime(4) = 1
value = s0,46

[State 4050, 腕振り音]
type = Playsnd
trigger1 = Anim = 4050
trigger1 = AnimElemTime(4) = 1
value = s0,3

[State 4004, 距離算出]
type = Null
triggerall = !IsHelper
trigger1 = 1||fvar(0) := Abs( Pos X - EnemyNear,Pos X )
trigger1 = 1||fvar(1) := Abs( Pos Y - EnemyNear,Pos Y)
persistent = 256
ignorehitpause = 1

[State 4004, 角度算出]
type = Null
triggerall = !IsHelper
triggerall = AnimElemTime(3) >= 0
triggerall = AnimElemTime(6) <= 5
trigger1 = fvar(0) && fvar(1)
trigger1 = var(1)  := floor( Atan(fvar(0)/fvar(1))*(180/Pi) )
trigger2 = fvar(0) && !fvar(1)
trigger2 = var(1)  := floor( Atan(fvar(0))*(180/Pi) )
trigger3 = !fvar(0) && fvar(1)
trigger3 = var(1)  := floor( Atan(fvar(1))*(180/Pi) )
ignorehitpause = 1

[State 4050, 腕振り音]
type = VelSet
trigger1 = Anim = 4050
trigger1 = AnimElemTime(4) = 0
x = Sin(var(1)/(180/Pi))*12
y = -12
ignorehitpause = 1

[State 4050, 腕振り音]
type = VelAdd
trigger1 = Anim = 4050
trigger1 = AnimElemTime(4) > 0
y = 0.36
ignorehitpause = 1

[State 4050, 腕振り音]
type = VelAdd
trigger1 = Anim = 4050
trigger1 = AnimElemTime(4) > 0
trigger1 = ( Pos X - EnemyNear,Pos X ) * ifelse( Facing=1 ,-1 ,1 ) < -15
y = 1.15
ignorehitpause = 1

[State 4050, ヒット計測]
type = MoveHitReset
triggerall = Anim = 4050
trigger1 = MoveContact
trigger1 = AnimElemTime(4) > 0
trigger1 = var(0) := var(0) + 1
persistent = 256
ignorehitpause = 1

[State 4050, 空振り計測]
type = Null
triggerall = Anim = 4050
trigger1 = AnimElemTime(4) = 1
trigger1 = var(1) := var(1) + 1
trigger2 = AnimElemTime(1) = 0
trigger2 = 1 || (var(0) := 0) || (var(1) := 0)
persistent = 256
ignorehitpause = 1

[State -1]
Type = Explod
trigger1 = Anim = 4050
Trigger1 = AnimElem = 3
Anim = 4109
ID = 4109
PosType = P1
Pos = 0,0
Ownpal = 1
SprPriority = 4
BindTime = 1
RemoveOnGetHit = 1
SuperMoveTime = 2147483647 * NumHelper(4162)
PauseMoveTime = 2147483647 * NumHelper(4162)
IgnoreHitPause = 1

[State -1]
Type = Explod
trigger1 = Anim = 4050
Trigger1 = AnimElem = 3
Anim = 4110
ID = 4110
PosType = P1
Pos = 0,0
Ownpal = 1
SprPriority = 4
BindTime = 1
RemoveOnGetHit = 1
SuperMoveTime = 2147483647 * NumHelper(4162)
PauseMoveTime = 2147483647 * NumHelper(4162)
IgnoreHitPause = 1

[State -1]
Type = Explod
triggerall = Anim = 4050
Trigger1 = AnimElemTime(4) = 1
Anim = 4150
ID = 4150
PosType = P1
Pos = 0,0
Ownpal = 1
SprPriority = 4
BindTime = -1
persistent = 256
RemoveOnGetHit = 1
SuperMoveTime = 2147483647 * NumHelper(4162)
PauseMoveTime = 2147483647 * NumHelper(4162)
IgnoreHitPause = 1

[State -1]
Type = Explod
triggerall = Anim = 4050
Trigger1 = AnimElemTime(4) = 1
Anim = 4151
ID = 4151
PosType = P1
Pos = 0,0
Ownpal = 1
SprPriority = 4
BindTime = -1
persistent = 256
RemoveOnGetHit = 1
SuperMoveTime = 2147483647 * NumHelper(4162)
PauseMoveTime = 2147483647 * NumHelper(4162)
IgnoreHitPause = 1

[State -1]
Type = Explod
triggerall = Anim = 4050
Trigger1 = AnimElemTime(4) = 1
Anim = 4152
ID = 4152
PosType = P1
Pos = 0,0
Ownpal = 1
SprPriority = 4
BindTime = -1
persistent = 256
RemoveOnGetHit = 1
SuperMoveTime = 2147483647 * NumHelper(4162)
PauseMoveTime = 2147483647 * NumHelper(4162)
IgnoreHitPause = 1

[State -1]
Type = Explod
triggerall = Anim = 4050
Trigger1 = AnimElemTime(4) = 1
Anim = 4153
ID = 4153
PosType = P1
Pos = 0,0
Ownpal = 1
SprPriority = 4
BindTime = -1
persistent = 256
RemoveOnGetHit = 1
SuperMoveTime = 2147483647 * NumHelper(4162)
PauseMoveTime = 2147483647 * NumHelper(4162)
IgnoreHitPause = 1

[State -1]
Type = HitDef
Trigger1 = GameTime%5 = 0
Trigger1 = AnimElemTime(4) > 0
Attr = S, SP
Damage = 45,10
HitFlag = MAFD
GuardFlag = MA
Priority  = 2, Dodge
PauseTime = 0,0
Guard.PauseTime = 10,10
HitSound   = s0,22
GuardSound = s0,30
SparkNo = S4100+Random%2
Guard.SparkNo = -1
Ground.Type = Low
Air.Type = Low
ForceStand = 1
Ground.SlideTime = 45
Ground.HitTime  = 45
AirGuard.CtrlTime = 7
Ground.Velocity = -3,0
Guard.Velocity = 0
Air.Velocity = 0,-2
AirGuard.Velocity = 0,0
Down.Velocity = 0,0
Ground.CornerPush.VelOff = 0
Air.CornerPush.VelOff = 0
Down.CornerPush.VelOff = 0
Guard.cornerPush.VelOff = 0
Airguard.CornerPush.VelOff = 0
Fall.XVelocity = 0
Down.Bounce = 1
Kill = 0
Guard.Kill = 0
Fall = 0
Air.Fall = 1
Fall.Recover = 1
Fall.RecoverTime = 60
GetPower = 110, 94
GivePower = 110, 94
EnvShake.Time = 6
EnvShake.Freq = 90
EnvShake.Ampl = 6

[State 4050, 腕振り音]
type = AngleDraw
trigger1 = Anim = 4050
trigger1 = AnimElemTime(8) = [0,1]
value = -80
ignorehitpause = 1

[State 4050, 腕振り音]
type = ChangeAnim
triggerall = Anim = 4050
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
value = 4051
ignorehitpause = 1

[State 4050, 腕振り音]
type = VelSet
trigger1 = Anim = 4051
y = 0
ignorehitpause = 1

[State 4050, 腕振り音]
type = VelMul
trigger1 = Anim = 4051
x = 0.9
ignorehitpause = 1

[State 4050, 腕振り音]
type = PosSet
trigger1 = Anim = 4051
y = 0
ignorehitpause = 1

[State -1]
Type = Explod
trigger1 = Anim = 4051
Trigger1 = AnimElem = 1
Anim = 4123
ID = 4123
PosType = P1
Pos = 0,0
Ownpal = 1
SprPriority = 6
BindTime = -1
RemoveOnGetHit = 1
IgnoreHitPause = 1

[State 200]
type = SelfState
triggerall = Anim = 4051
triggerall = !AnimTime
trigger1 = 1 || (var(0) := 0) || (var(1) := 0)
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;	214C
;---------------------------------------------------------------------------

[StateDef 4052]
type = S
MoveType = A
physics = N
ctrl = 0
hitdefpersist = 1
movehitpersist = 1

[State 4050, アニメ変更]
type = ChangeAnim
trigger1 = Anim != [4050,4051]
trigger1 = 1 || var(0) := 0
value = 4050
ignorehitpause = 1

[State 4050, すり抜け]
type = PlayerPush
trigger1 = Anim = 4050
value = 0
ignorehitpause = 1

[State 4050, ダッシュ音]
type = Playsnd
trigger1 = Anim = 4050
trigger1 = AnimElem = 3
value = s0,6

[State 4050, ダッシュ音]
type = Playsnd
trigger1 = Anim = 4050
trigger1 = AnimElem = 3
value = s0,8

[State 4050, 風切り音]
type = Playsnd
trigger1 = Anim = 4050
trigger1 = AnimElemTime(4) = 1
value = s0,46

[State 4050, 腕振り音]
type = Playsnd
trigger1 = Anim = 4050
trigger1 = AnimElemTime(4) = 1
value = s0,3

[State 4050, 腕振り音]
type = VelSet
trigger1 = Anim = 4050
trigger1 = AnimElemTime(4) = 1
x = 32
ignorehitpause = 1

[State 4050, 往復計測]
type = Turn
triggerall = Anim = 4050
triggerall = AnimElemTime(4) > 0
triggerall = FrontEdgeDist <= 30
trigger1 = var(0) := var(0) + 1
persistent = 256
ignorehitpause = 1

[State -1]
Type = Explod
trigger1 = Anim = 4050
Trigger1 = AnimElem = 3
Anim = 4109
ID = 4109
PosType = P1
Pos = 0,0
Ownpal = 1
SprPriority = 4
BindTime = 1
RemoveOnGetHit = 1
SuperMoveTime = 2147483647 * NumHelper(4162)
PauseMoveTime = 2147483647 * NumHelper(4162)
IgnoreHitPause = 1

[State -1]
Type = Explod
trigger1 = Anim = 4050
Trigger1 = AnimElem = 3
Anim = 4110
ID = 4110
PosType = P1
Pos = 0,0
Ownpal = 1
SprPriority = 4
BindTime = 1
RemoveOnGetHit = 1
SuperMoveTime = 2147483647 * NumHelper(4162)
PauseMoveTime = 2147483647 * NumHelper(4162)
IgnoreHitPause = 1

[State -1]
Type = Explod
triggerall = Anim = 4050
Trigger1 = AnimElemTime(4) = 1
Anim = 4150
ID = 4150
PosType = P1
Pos = 0,0
Ownpal = 1
SprPriority = 4
BindTime = -1
persistent = 256
RemoveOnGetHit = 1
SuperMoveTime = 2147483647 * NumHelper(4162)
PauseMoveTime = 2147483647 * NumHelper(4162)
IgnoreHitPause = 1

[State -1]
Type = Explod
triggerall = Anim = 4050
Trigger1 = AnimElemTime(4) = 1
Anim = 4151
ID = 4151
PosType = P1
Pos = 0,0
Ownpal = 1
SprPriority = 4
BindTime = -1
persistent = 256
RemoveOnGetHit = 1
SuperMoveTime = 2147483647 * NumHelper(4162)
PauseMoveTime = 2147483647 * NumHelper(4162)
IgnoreHitPause = 1

[State -1]
Type = Explod
triggerall = Anim = 4050
Trigger1 = AnimElemTime(4) = 1
Anim = 4152
ID = 4152
PosType = P1
Pos = 0,0
Ownpal = 1
SprPriority = 4
BindTime = -1
persistent = 256
RemoveOnGetHit = 1
SuperMoveTime = 2147483647 * NumHelper(4162)
PauseMoveTime = 2147483647 * NumHelper(4162)
IgnoreHitPause = 1

[State -1]
Type = Explod
triggerall = Anim = 4050
Trigger1 = AnimElemTime(4) = 1
Anim = 4153
ID = 4153
PosType = P1
Pos = 0,0
Ownpal = 1
SprPriority = 4
BindTime = -1
persistent = 256
RemoveOnGetHit = 1
SuperMoveTime = 2147483647 * NumHelper(4162)
PauseMoveTime = 2147483647 * NumHelper(4162)
IgnoreHitPause = 1

[State -1]
Type = HitDef
Trigger1 = GameTime%5 = 0
Trigger1 = AnimElemTime(4) > 0
Attr = S, SP
Damage = 12,1
HitFlag = MAFD
GuardFlag = MA
Priority  = 2, Dodge
PauseTime = 2,2
Guard.PauseTime = 10,10
HitSound   = s0,22
GuardSound = s0,30
SparkNo = S4100+Random%2
Guard.SparkNo = -1
Ground.Type = Low
Air.Type = Low
ForceStand = 1
Ground.SlideTime = 45
Ground.HitTime  = 45
AirGuard.CtrlTime = 7
Ground.Velocity = -3,0
Guard.Velocity = 0
Air.Velocity = 0,-2
AirGuard.Velocity = 0,0
Down.Velocity = 0,0
Ground.CornerPush.VelOff = 0
Air.CornerPush.VelOff = 0
Down.CornerPush.VelOff = 0
Guard.cornerPush.VelOff = 0
Airguard.CornerPush.VelOff = 0
Fall.XVelocity = 0
Down.Bounce = 1
Kill = 0
Guard.Kill = 0
Fall = 0
Air.Fall = 1
Fall.Recover = 1
Fall.RecoverTime = 60
GetPower = 110, 94
GivePower = 110, 94
EnvShake.Time = 6
EnvShake.Freq = 90
EnvShake.Ampl = 6
ignorehitpause = 1

[State 4050, 腕振り音]
type = AngleDraw
trigger1 = Anim = 4050
trigger1 = AnimElemTime(8) = [0,1]
value = -80
ignorehitpause = 1

[State 4050, 腕振り音]
type = ChangeAnim
triggerall = Anim = 4050
trigger1 = var(0) >= 5
value = 4051
ignorehitpause = 1

[State 4050, 腕振り音]
type = VelSet
trigger1 = Anim = 4051
y = 0
ignorehitpause = 1

[State 4050, 腕振り音]
type = PosSet
trigger1 = Anim = 4051
y = 0
ignorehitpause = 1

[State -1]
Type = Explod
trigger1 = Anim = 4051
Trigger1 = AnimElem = 1
Anim = 4123
ID = 4123
PosType = P1
Pos = 0,0
Ownpal = 1
SprPriority = 6
BindTime = -1
RemoveOnGetHit = 1
IgnoreHitPause = 1

[State 200]
type = SelfState
triggerall = Anim = 4051
triggerall = !AnimTime
trigger1 = 1 || (var(0) := 0) || (var(1) := 0)
value = 0
ctrl = 1


;///////////////////////////////////////////////////////////////////////////
;常駐ヘルパー	%nとかやる用
;///////////////////////////////////////////////////////////////////////////
[Statedef 4999]
type = S
movetype = I
physics = N
ctrl  = 0
anim = 2147483647

[State ]
type = Null
trigger1 = 1